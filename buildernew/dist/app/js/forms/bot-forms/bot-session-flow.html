<div class="col-xs-12  bot-session-flow-filter ">

<!--     <button class="btn btn-sessionflow active" ng-class='{"active": isConversation, "disabled-export": isRequesting}'  ng-click='onViewClick("conv")'>Conversation View</button>
    <button class="btn btn-sessionflow" ng-class='{"active": !isConversation, "disabled-export": isRequesting}' ng-click='onViewClick("time")'>Timeline View</button>
    <button class="btn btn-sessionflow ng-hide">Agent View</button> -->

    <!-- <span class='dropdown pull-right regroup-dropdown' ng-hide='!isSessionFlowAvail'>
        <a href="#" class="dropdown-toggle"  data-toggle="dropdown">
            <i class="fa fa-ellipsis-v"></i>
        </a>
        <ul class='dropdown-menu'>
            <li class='list-session-flow cursor-pointer' data-toggle='modal' data-target='#regroup' data-backdrop='static'>Re-group Utterances</li>
        </ul>
    </span>
     -->
    <!-- <button class="pull-right filter-button" > {{'filter'| i18nString}}</button> -->

    <!-- <div ng-if="!defaultFilter" class="filterTagParent">
        <div class="filterTag" ng-repeat="tag in filterTags track by $index">
            <div class="tagContainer"><span  tooltip-placement="bottom" tooltip="{{tag.tooltipValue}}">{{tag.value}}</span><span ng-click="removeFilterTag($index, tag)" class="fa fa-close closeIcon"></span></div>
        </div>
        <div ng-if="filterTags.length>1" class="filterTag addRedColor" ng-click="clearFilterTags()"><span class="fa fa-close red"></span> {{'clear_all_label'| i18nString}}</div>
    </div> 
    <div class="filterDefaultMsg addBG" ng-if="defaultFilter">{{defaultFilterMsg}}</div>-->
    <div class="row btnSearchTitle">
                <span class='clustering-progress' ng-show='regroupDone.message && !regroupDone.progress'>
            <i class="btx-billing-checked"></i>
            <span class='clustering-text'> {{'done_exclamation'| i18nString}}</span>
            <button class='btnBlue' ng-click='onViewClick("conv")'> {{'reload_label'| i18nString}}</button>
        </span>
            <span class='clustering-progress error' ng-show='regroupDone.error && !regroupDone.dockError'>
            <span class='clustering-text'>{{regroupDone.error}}</span>
            <button class='btnBlue' ng-click='scheduleCluster()'> {{'retry'| i18nString}}</button>
        </span>
        <span class='clustering-progress dock-error' ng-show='regroupDone.dockError'>
            <span>{{regroupDone.error}}</span>
            <button class='btnBlue' ng-click='scheduleCluster()'> {{'retry'| i18nString}}</button>
        </span>
               <span class='clustering-progress' data-toggle="popover" data-placement="top" data-content=" {{'you_may_continue_to_work_cluster_msg'| i18nString}}" ng-show='regroupDone.progress && !regroupDone.message'>
                    <img class='clustering-icon' ng-src="{{iconContextPath}}/clustering-session-flow-blue.png"/>
                    <span class='clustering-text'> {{'clustering'| i18nString}}</span>
                </span>
      
        <div class="col-xs-6 leftTitle ">
            <p class="pageTitle">
                {{'conversation_flow'| i18nString}}
            </p>
            <!-- <toggle-switch ng-model="isConver.conversation" ng-change="onViewClick()" no-opt="true" class="pull-left single-label-no-margin mt-4">
            </toggle-switch>
            <span class='toggleSwitch'>
                <span class='toggle-text pl-10' style="position: relative; top: 1px">
                    {{'view_tasks_by_sessions'| i18nString}}
                    <a href="https://developer.kore.ai/docs/bots/analyzing-your-bot/conversation-flow/" style="color: #9AA0A6;top: 2px;position: relative;" target="_blank"><i class="btx-help help-icon"></i></a>
                </span>
            </span> -->
        </div>

        <div class="col-xs-6 rightBTNSearch hide">
            <div class="filtersDetails" ng-if="defaultFilter">
                <span class="filterListContainer">
                    <span class="filterCat transformCapitalize" tooltip-placement="bottom" tooltip="{{defaultFilterMsgTooltip}}">{{defaultFilterMsg}} </span>
                    <i class="btx-close" ng-click="showDateWarning()"></i>
                </span>
            </div>
            <div class="filtersDetails" ng-if="!defaultFilter">
                <span class="filterListContainer" ng-repeat="tag in filterTags.slice(0,3) track by $index">
                    <span class="filterCat transformCapitalize" tooltip-placement="bottom" tooltip="{{tag.tooltipValue}}">{{tag.value}} </span>
                    <span class="filterClose" ng-if="(tag.datePeriodValue) ||((tag.count !== '7 Days' &&  !tag.datePeriodValue) && (tag.count !== '1 Day'))">({{tag.count || 0}})</span>
                    <i class="btx-close" ng-click="removeFilterTag($index, tag)"></i>
                </span>
                <div class="dropdown moreDD" ng-if="filterTags.length > 3">
                    <a href="#" class="moreFilters" data-toggle="dropdown">
                        +{{(filterTags.length - 3)}} more
                        </a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item" ng-repeat="tag in filterTags.slice(3, filterTags.length) track by $index">
                            <span class="filterCat">{{tag.value}} </span>
                            <span class="filterClose">({{tag.count}})</span>
                            <i class="btx-close" ng-click="removeFilterTag($index, tag)"></i>
                        </li>                       
                    </ul>
                </div>
                <span class="clearAllFilters" ng-if="filterTags.length>1">
                    <span class="filterCat">{{'clear_all_label'| i18nString}} </span>
                    <!-- <span class="filterClose">({{filterTags.length}})</span> -->
                    <i class="btx-close" ng-click="clearFilterTags()"></i>
                </span>
            </div>
      
            <div class="btnActions ">
                <button class="filtersBTN" ng-click="openFilterSlider()"> <i class="btx-filters"></i></button>
            </div>
            <!-- <div ng-if="!defaultFilter" class="filterTagParent">
                <div class="filterTag" ng-repeat="tag in filterTags track by $index">
                    <div class="tagContainer"><span  tooltip-placement="bottom" tooltip="{{tag.tooltipValue}}">{{tag.value}}</span><span ng-click="removeFilterTag($index, tag)" class="fa fa-close closeIcon"></span></div>
                </div>
                <div ng-if="filterTags.length>1" class="filterTag addRedColor" ng-click="clearFilterTags()"><span class="fa fa-close red"></span> {{'clear_all_label'| i18nString}}</div>
            </div>
            <div class="filterDefaultMsg addBG" ng-if="defaultFilter">{{defaultFilterMsg}}</div> -->

        </div>
      </div>
        <!-- NEW FILTERS -->
        <div  class="row  newFilters cfFilters">
    
            <div class="filtersContent">
             <!-- <div class="filterTitle">{{'conversation_flow'| i18nString}}</div> -->
                <div class="kr-sg-dropdowns noMargin">
                    <div class="label-text">{{'date_label' | i18nString}}</div>
                    <div class="dropdown dropdown-open daterangeCustomDropdown">
                        <button class="dropdown-toggle dropdown-input pl-30 width230" data-toggle="dropdown"> 
                            <!-- <span class="dateTime">{{startDate | date:'MMM dd yyyy'}} - {{endDate | date:'MMM dd yyyy'}}</span>  -->
                            <span class="dateTime">{{dateDisplayName}}</span> 
                        </button>
                        <i class="btx-carrot-down"></i>
                        <ul class="dropdown-menu content-menu cust-date" >
                            <li><a ><div class="dateBtn" ng-class="{'selected':(days!==7) && days!==-1}" ng-click="getDefaultFilter(1)"> {{'24_hours'| i18nString}}</div>
                                <span class="check-icon" ng-if="days===1">
                                    <i class="btx-check"></i>
                                  </span>
                                </a></li>
                            <li><a ><div class="dateBtn" ng-class="{'selected':days===7}" ng-click="getDefaultFilter(7)"> {{'last_seven_days'| i18nString}}</div>
                                <span class="check-icon" ng-if="days===7">
                                    <i class="btx-check"></i>
                                  </span></a></li>
                            <li ng-click="$event.stopPropagation();"><a ><div class="dateBtn" type="text" name="daterange" ng-class="{'selected':days===-1}" ng-click="getDefaultFilter(-1)"> {{'custom'| i18nString}}</div>
                                <span class="check-icon" ng-if="days===-1">
                                    <i class="btx-check"></i>
                                  </span></a></li>
                        </ul>
                    </div>
                    <span class="tooltip-custom">
                        <i class="helpIcon btx-info"></i>
                        <span class="tooltiptext">
                            <!-- <div>{{'dateperiod_tooltip1'| i18nString}}</div>
                            <div>1. {{'seven_days'|i18nString }}</div>
                            <div>2. {{'24_hours'| i18nString}}</div>
                            <div>3. {{'dateperiod_tooltip2'| i18nString}}.</div> -->
                            <div class="mb-2">{{'dateperiod_tooltip1'| i18nString}}</div>
                            <ul>
                                <li class="mt-1 mb-1">{{'seven_days'|i18nString }}</li>
                                <li class="mt-1 mb-1">{{'24_hours'| i18nString}}</li>
                                <li class="mt-1 mb-1">{{'dateperiod_tooltip2'| i18nString}}.</li>
                            </ul>
                        </span>
                    </span>
                </div>
                <div class="kr-sg-dropdowns">
                    <div class="label-text">{{'Session_type' | i18nString}} </div>
                    <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input pl-30 width112" data-toggle="dropdown">{{sessionType? sessionType.name: ('choose_an_option' | i18nString)}}</button>
                        <i class="btx-carrot-down"></i>
                        <ul class="dropdown-menu content-menu">                                         
                            <li ng-repeat="item in sessionTypeList" ng-click="selectSessionType(item)"><a>{{item.name}}</a></li>
                        </ul>
                    </div>
                    <span class="tooltip-custom">
                        <i class="helpIcon btx-info"></i>
                        <span class="tooltiptext">
                            <div>{{'sessionType_tooltip1'| i18nString}}</div>
                            <ul>
                                <li>{{'sessionType_tooltip2' | i18nString}}</li>
                                <li>{{'sessionType_tooltip3'| i18nString}}</li>
                            </ul>
                        </span>
                    </span>
                </div>
                <div class="kr-sg-dropdowns">
                    <div class="label-text">{{'session_status' | i18nString}} </div>
                    <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input  pl-30 width88" data-toggle="dropdown">{{sessionStatus? sessionStatus.name: ('choose_an_option' | i18nString)}}</button>     
                        <i class="btx-carrot-down"></i>                                       
                        <ul class="dropdown-menu content-menu">                                         
                            <li ng-repeat="item in sessionStatusList" ng-click="selectSessionStatus(item)"><a>{{item.name}}</a></li>
                        </ul>
                    </div>
                    <span class="tooltip-custom">
                        <i class="helpIcon btx-info"></i>
                        <span class="tooltiptext">
                            <div>{{'sessionStatus_tooltip1'| i18nString}} </div>
                            <ul>
                                <li>{{'sessionStatus_tooltip2' | i18nString}}</li>
                                <li>{{'sessionStatus_tooltip3' | i18nString}} {{'sessionStatus_tooltip4' | i18nString }} <a href="https://developer.kore.ai/docs/bots/analyzing-your-bot/dashboard/#Usage_Metrics" target="_blank">{{'here'| i18nString}}</a></li>
                            </ul>
                            <!-- <div>- {{'sessionStatus_tooltip2' | i18nString}} </div>
                            <div>- {{'sessionStatus_tooltip3' | i18nString}}</div>
                            {{'sessionStatus_tooltip4' | i18nString }} <a href="https://developer.kore.ai/docs/bots/analyzing-your-bot/dashboard/#Usage_Metrics" target="_blank">{{'here'| i18nString}}</a>  -->
                        </span>
                    </span>
                </div>
                <div class="more-filter" ng-class="{'moreFilterModal': moreFilterModal}">
                    <button ng-click="moreFilterToggle()" class="filters-btn">{{'more_filters' | i18nString}} <span><i class="btx-carrot-down" ng-if="moreFilterModal"></i><i ng-if="!moreFilterModal" class="btx-carrot-up"></i></span> </button>
                    <div class="filter-container" ng-if="moreFilterModal">
                        <div perfect-scroll class="scrollLi" >
                            <div class="col-xs-12  eachSection">
                                <div class="title"> {{'languages_label'| i18nString}}</div>
                                <div class="ele"><sumo-select search=true options="supportedLanguages" callback="sumocb.languagescb" placeholder=" {{'all_languages'| i18nString}}" title-key="value" value-key="type" value="filterSession.selectedLanguages"></sumo-select></div>
                            </div>
                            <div class="col-xs-12  eachSection">
                                <div class="title"> {{'channel_name'| i18nString}}</div>
                                <div class="ele"><sumo-select search=true options="channels" callback="sumocb.channelscb" placeholder=" {{'all_channels'| i18nString}}" title-key="value" value-key="type" value="filterSession.selectedChannels"></sumo-select></div>
                            </div>
                            <div class="col-xs-12  eachSection">
                                <div class="title Fontbold">{{'custom_tags'| i18nString}}
                                    <i class="btx-info" tooltip-placement="right"
                                    tooltip="{{'customtags_filter'| i18nString}}"></i>
                                </div>
                                <div class="customTagsDiv">
                                    <div class="row dFlex" ng-repeat="selectedTag in selectedTagsArray track by $index" ng-class='{"subTag": $index > 0}'>
                                        <div class="andIcon row" ng-show = "$index > 0">
                                            <!-- <img ng-src="{{andIcon}}" class="andIconImg " ng-click="addCustomTags()"> -->
                                            <span class="andBG" ng-click="addCustomTags()">And</span>
                                        </div>
                                        
                                        <div class="kr-sg-dropdowns noMargin">
                                            <div class="dropdown dropdown-open " ng-click = "updateScrollfunction()">
                                                <a class="dropdown-toggle  dropdown-input" type="button" data-toggle="dropdown">
                                                    <div class="version"><span class="mainText">{{(selectedTag.name?selectedTag.name:select)}}</span> <span class="subText">{{(selectedTag.type?selectedTag.type:'')}}</span></div>
                                                    <i class="btx-carrot-down"></i>   
                                                </a>
                                                <ul class="dropdown-menu">
                                                    <div class="customTagsDivScroll">
                                                        <div class="searchComponent"  ng-click = "searchClick($event)">
                                                            <input placeholder=" {{'search_key'| i18nString}}" ng-model="search.nameSearchQuery" class="searchInput">
                                                            <i class="btx-search"></i>
                                                            <i class="btx-close displayNone"></i>
                                                        </div>
                                                        <div id = "scrollUpdateItems" class = "item" perfect-scroll>
                                                            <li class="select-item" ng-repeat = "tag in customTagsArray |filter:{name:search.nameSearchQuery} | filter:filterCustomTags track by $index">
                                                                <div class="version" ng-click= "updatedropDown(tag,$parent.$index)" title="{{tag.name}} ({{tag.type}})"> <img ng-if = "selectedTag.name?(selectedTag.name === tag.name):false" ng-src="{{checkTickIcon}}" class="checkTickIcon">{{tag.name}} <span class="subText">({{tag.type}})</span></div>
                                                            </li>
                                                        </div>
                                                    </div>
                                                </ul>
                                            </div>
                                        </div>

                                        <div class="middleTags ml-10 width100">
                                            <tags-input ng-model = "selectedTagsArray[$index].values" add-from-autocomplete-only = 'true' add-on-comma="false" allow-leftover-text = 'false' replace-spaces-with-dashes="false" min-length="0" max-length="128" placeholder=" {{'type_select'| i18nString}}" use-strings="true" on-tag-added="saveCustomTag()" on-tag-removed="deleteCustomTag()" ng-model="customTag.value" class='bot-session-tags-input' ng-blur = "dynamicHeight($event,selectedTag)" ng-focus = "calculateHeight($event)">
                                                <auto-complete min-length="1" highlight-matched-text="false" source="searchValues($query,selectedTag.selectedValues)"></auto-complete>
                                            </tags-input>
                                            <div ng-show = "selectedTag.invalidValue " class="invalidValue">
                                                {{'value_entered_not_valid'| i18nString}}
                                            </div>
                                        </div>
                                        <!-- <div class="col-xs-1 rightIcons">
                                            <span ng-if='$index !== selectedTagsArray.length - 1'  class="trashDiv"><img ng-src="{{minusIcon}}" class="trashIcon" ng-click="removeCustomsTags($index)"></span>
                                            <span ng-if='$index === selectedTagsArray.length - 1' class="addDiv"><img ng-src="{{disabledMinusIcon}}" class="trashIcon "></span>
                                        </div> -->
                                        <div class="trashDiv" ng-click="removeCustomsTags($index)">
                                            <i class="trashIcon btx-delete-1"></i>
                                    <!-- <span ng-if='$index === selectedTagsArray.length - 1' class="addDiv">
                                        <i class="trashIcon btx-delete1"></i>
                                    </span> -->
                                </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ctFooter ">
                            <div class="fLeft">  
                                <button class="kr-sg-button-primary btn_lg" ng-disabled='isDisabled' ng-click="applyFilter();moreFilterToggle();">{{'add' | i18nString}}</button>
                                <button class="kr-sg-button-secondary btn_lg" ng-click="moreFilterToggle()">{{'cancel' | i18nString }}</button>
                          </div>
                              <!-- <div class="fRight">
                                  <button class="kr-sg-button-secondary btn_lg">Save as Default Filter</button>
                                  <button class="kr-sg-button-ghost btn_lg" ng-click="resetFilter()"><span>Clear Filter</span></button>
                              </div> -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="rightBTNContainer">
                <button class="kr-sg-button-ghost btn_lg" ng-click="resetFilter()"><span>{{'reset'| i18nString}}</span></button>
                <button class="kr-sg-button-primary btn_lg" ng-disabled='isDisabled' ng-click="applyFilter()">{{'apply'| i18nString}}</button>
            </div>
        </div>
   
        <!-- NEW FILTERS -->
</div>


<div class="emptyStateContainer paddingTop80" ng-show='!isSessionFlowAvail && !sessionFlowLoading'>
    <div class="emptyState">
        <div class="emptyImage">
            <img ng-src="{{emptyStateIcon}}" class="emptyImg">           
        </div>  
        <!-- <span class="mainTitle">{{'noQuestionsContent'| i18nString}}</span> -->
        <div class="emptyStateDesc">{{'noQuestionsContent'| i18nString}}</div>
        <!-- <div class="generateBtn">
            <button class="btn btnSolidBlue" >Add</button>
            <button class="btn" target="_blank" >learn more</button>
        </div> -->
    </div>
</div>
</div>
<div class="col-xs-12 please-wait text-center bot-session-flow-no-data"  ng-show='sessionFlowLoading'>
    <i class='fa fa-circle-o-notch fa-spin-fast'></i>
    <span class='loading-text'> {{'loading_data'| i18nString}}</span>
</div>
<div class="col-xs-12 noPadding bot-session-flow" ng-show='isSessionFlowAvail  && !sessionFlowLoading' dynamic-height  height-property="height" dynaoffset="-210" ng-class='{"hide-flow": isRequesting, "show-flow": !isRequesting}'>
         <ul class="options ng-hide" callback="changeSize">
           <li id="currentDisplay" class="selected"><a></a></li>
        </ul> 

    <!-- Our main content container-->

     <div class="toggleDivContainer">
        <div class="row">
            <toggle-switch ng-model="isConver.conversation" ng-change="onViewClick()" no-opt="true" class="pull-left single-label-no-margin">
            </toggle-switch>
            <span class='toggleSwitch'>
                <span class='toggle-text pl-10' style="position: relative; top: 1px">
                    {{'view_tasks_by_sessions'| i18nString}}
                    <a href="https://developer.kore.ai/docs/bots/analyzing-your-bot/conversation-flow/" style="color: #9AA0A6;top: 2px;position: relative;" target="_blank"><i class="btx-help help-icon"></i></a>
                </span>
            </span>
    </div>
     </div>
        <div id="viz_container" class="z-depth-3"  dynamic-height  height-property="height" dynaoffset="-260"  perfect-scroll>
        </div>

</div>


<bot-modal-slider id='sessionFlowFilter'>
   <div class="modalSliderContainer width700" >
      <!--Header Starts Here -->
        <div class="modalHeader">
            <h4 class="modal-title">
                <i class="btx-close"ng-click="importModalSliderClose()" ></i>{{'filter'| i18nString}}
            </h4>
        </div>
        <!-- Header Starts Here -->
        <!-- Body Starts Here -->
        <div class="modalBody row" perfect-scroll dynamic-height dynaoffset="-120" height-property="height">
        <!-- <div class="modalBody" perfect-scroll dynamic-height dynaoffset="-115" height-property="height"> -->

            <div class="col-xs-12 eachSection">
                <div class="title col-xs-12 noPadding d-flex align-items-center mb-5">
                    <div class="col-xs-4 noPadding"> {{'date_period'| i18nString}}</div>
                    <div class="col-xs-8 noPadding tableDisplay">
                        <div class="dateBtn customdatepicker" type="text" name="daterange" ng-class="{'selected':days===-1}" ng-click="getDefaultFilter(-1)"> {{'custom'| i18nString}}</div>
                        <div class="dateBtn" ng-class="{'selected':days===7}" ng-click="getDefaultFilter(7)"> {{'last_seven_days'| i18nString}}</div>
                        <div class="dateBtn" ng-class="{'selected':(days!==7) && days!==-1}" ng-click="getDefaultFilter(1)"> {{'24_hours_label'| i18nString}}</div>                        
                    </div>
                </div>
                <div class="ele dateRange"><span class="dateText">{{startDate | date:'MM-dd-yyyy'}}  {{'to_label'| i18nString}} {{endDate | date:'MM-dd-yyyy'}}</span></div>
            </div>
            <!-- Conversation Session Type Filter dropdown -->
            <!-- <div class="col-xs-12  eachSection">
                <div class="title popover-tooltip-show">{{'conversation_session_type'| i18nString}} -->
                    <!-- <img ng-src={{helpIcon}} class="helpIcon sessionType_help" tooltip-placement="right"
                        tooltip="{{'conversation_help'| i18nString}}"> -->
                        <!-- <img ng-src={{helpIcon}} class="sessionType_help" data-toggle="popover" data-placement="right"></i>
                </div>
                <div class="ele">
                    <sumo-select search=false options="sessionType" callback="sumocb.sessionscb"
                        placeholder="Select" title-key="type" value-key="type"
                        value="filterSession.selectedSession"></sumo-select>
                </div>
            </div> -->

            <div class="col-xs-12  eachSection">
                <div class="title"> {{'languages_label'| i18nString}}</div>
                <div class="ele"><sumo-select search=true options="supportedLanguages" callback="sumocb.languagescb" placeholder=" {{'all_languages'| i18nString}}" title-key="value" value-key="type" value="filterSession.selectedLanguages"></sumo-select></div>
            </div>
            <div class="col-xs-12  eachSection">
                <div class="title"> {{'channel_name'| i18nString}}</div>
                <div class="ele"><sumo-select search=true options="channels" callback="sumocb.channelscb" placeholder=" {{'all_channels'| i18nString}}" title-key="value" value-key="type" value="filterSession.selectedChannels"></sumo-select></div>
            </div>

            <div class="col-xs-12  eachSection">
                <div class="title">{{'custom_tags'| i18nString}}
                    <img ng-src={{helpIcon}} class="helpIcon" tooltip-placement="right" tooltip=" {{'customtags_filter'| i18nString}}">
                </div>
                <div class="customTagsDiv">
                    <div class="row displayTable" ng-repeat="selectedTag in selectedTagsArray track by $index">
                        <div class="andIcon row" ng-show = "$index > 0">
                            <img ng-src="{{andIcon}}" class="andIconImg " ng-click="addCustomTags()">
                            <!-- <div class="andText">
                                <span class="text">AND</span>
                                <span class="lineBG"></span>
                            </div> -->
                        </div>
                        <div class="dropdown col-xs-4 leftDropDown" ng-click = "updateScrollfunction()">
                            <!-- <span class="seperatorLine"></span> -->
                            <a class="dropdown-toggle" type="button" data-toggle="dropdown">
                                <div class="version"><span class="mainText">{{(selectedTag.name?selectedTag.name:select)}}</span> <span class="subText">{{(selectedTag.type?selectedTag.type:'')}}</span></div>
                                <img ng-src={{caretDown}} class="caretDown">
                            </a>
                            <ul class="dropdown-menu">
                                <div class="customTagsDivScroll">
                                    <!-- <div class="searchDiv" ng-click = "searchClick($event)">
                                        <input placeholder=" {{'search_key'| i18nString}}" ng-model="search.nameSearchQuery" class="searchInput">
                                        <img ng-src={{searchIconGray}} class="searchIconGray">
                                    </div> -->
                                    <div class="searchComponent"  ng-click = "searchClick($event)">
                                        <input placeholder=" {{'search_key'| i18nString}}" ng-model="search.nameSearchQuery" class="searchInput">
                                        <i class="btx-search"></i>
                                        <i class="btx-close displayNone"></i>
                                    </div>
                                    <div id = "scrollUpdateItems" class = "item" perfect-scroll>
                                        <li class="select-item" ng-repeat = "tag in customTagsArray |filter:{name:search.nameSearchQuery} | filter:filterCustomTags track by $index">
                                            <div class="version" ng-click= "updatedropDown(tag,$parent.$index)" title="{{tag.name}} ({{tag.type}})"> <img ng-if = "selectedTag.name?(selectedTag.name === tag.name):false" ng-src="{{checkTickIcon}}" class="checkTickIcon">{{tag.name}} <span class="subText">({{tag.type}})</span></div>
                                        </li>
                                    </div>
                                </div>
                            </ul>
                        </div>
                        <div class="col-xs-7 middleTags">
                            <tags-input ng-model = "selectedTagsArray[$index].values" add-from-autocomplete-only = 'true' add-on-comma="false" allow-leftover-text = 'false' replace-spaces-with-dashes="false" min-length="0" max-length="128" placeholder=" {{'type_select'| i18nString}}" use-strings="true" on-tag-added="saveCustomTag()" on-tag-removed="deleteCustomTag()" ng-model="customTag.value" class='bot-session-tags-input' ng-blur = "dynamicHeight($event,selectedTag)" ng-focus = "calculateHeight($event)">
                                <auto-complete min-length="1" highlight-matched-text="false" source="searchValues($query,selectedTag.selectedValues)"></auto-complete>
                            </tags-input>
                            <div ng-show = "selectedTag.invalidValue " class="invalidValue">
                                {{'value_entered_not_valid'| i18nString}}
                            </div>
                        </div>
                        <div class="col-xs-1 rightIcons">
                            <span ng-if='$index !== selectedTagsArray.length - 1'  class="trashDiv"><img ng-src="{{minusIcon}}" class="trashIcon" ng-click="removeCustomsTags($index)"></span>
                            <span ng-if='$index === selectedTagsArray.length - 1' class="addDiv"><img ng-src="{{disabledMinusIcon}}" class="trashIcon "></span>
                        </div>
                    </div>
                </div>
            </div>

            
        </div>
      <!-- Body Ends Here -->
      <!-- Footer Starts Here -->
      <div class="modalFooter">
            <div class='col-xs-6 noPadding'>
                <button ng-disabled='isDisabled' ng-click="applyFilter()" class="btn applyBtn"> {{'apply'| i18nString}}</button>
            </div>
            <div class="col-xs-6 noPadding">
                <span class="filter" ng-click="resetFilter()"> {{'reset_filter'| i18nString}}</span>
            </div>
      </div>
      <!-- Footer Ends Here -->
   </div>
</bot-modal-slider>



<bot-modal-slider id='sessionFlowUtterance'>
   <div class="modalSliderContainer width610 col-md-6 right-separator noPadding" ng-if='!chat.slider && gps.utterancesShow'>
      <!--Header Starts Here -->
        <div class="modalHeader">   
            <h4 class="modal-title">
                <i class="btx-close" ng-src={{closeCross}} ng-click="sFUttModalClose()" ng-show='!backArrow.utterances'></
                <i ng-show='backArrow.utterances' ng-click='closeUtterances()' classbtx-arrow-back></i>
                {{utteranceHead}}
            </h4>
        </div>
        <!-- Header Starts Here -->
        <!-- Body Starts Here -->
        <div class="modalBody" ng-show='!stateLoad.utterances'>
            <div class="searchExport">
                <div class="searchComponent" class="sessionFlowSearch" ng-show='utterances.length !== 0'>
                    <input  tabindex="1" type="text" ng-keyup='listScrollTop()' ng-model="sFlow.text" ng-init="sFlow.text = ''">
                    <i class="btx-search"></i>
                    <i class="btx-close displayNone"></i>
                </div>
                <button class='btn' ng-class="{'disabled-export': utterances.total == 0}" ng-click='exportUtterances()'>
                    <i class="export-data btx-export"></i>
                    <span>Export</span>
                </button>
            </div>
            <div class='faq-head' ng-class="{'disabled-export': utterances.total == 0}">
                <span>
                    {{'utterances'| i18nString}} (<span class='utt-count'>{{utterancesCount}}</span>)
                </span>
                <!-- <span class="sessionFlowSearch" ng-show='utterances.length !== 0'>
                    <input  tabindex="1" class="sessionFSearchInput" type="text" ng-keyup='listScrollTop()' ng-model="sFlow.text" ng-init="sFlow.text = ''">
                    <span class="searchBarUtt fa fa-search cursor-pointer"></span>
                </span> -->
            </div>
            <div class='utt-ul' perfect-scroll dynamic-height dynaoffset="-130" height-property="height" id='uttNodeList'>
                <div ng-if='utterances.total == 0' class='no-utt-avail'>
                    {{'no_utterances_available'| i18nString}}
                </div>
                <!-- code for utterance commented -->
                <div class='utt-list cursor-pointer parentGroupDivBlock' ng-click='openChatSlider(utt.records[0].messageId, $event)' ng-repeat='utt in utterances.result | filter: sFlow.text track by $index' ng-if='utterances.total != 0' >
                    <span class='fa fa-compress left-pos' ng-click='groupEleHide($event)'></span>
                    <span class='fa fa-compress right-pos' ng-click='groupEleHide($event)'></span>
                    <div class='utt-list-head'>{{utt.records[0].input}}</div>
                    <span class='utt-count groupByTask' ng-click='groupedEleShow($event)' ng-hide='utt.total === 1'> {{'+' + utt.total}} </span>
                    <div class='grouped'>
                        <div class='records-utt' ng-repeat='reco in utt.records track by $index' ng-click='openChatSlider(utt.records[$index].messageId, $event)' ng-show="!$first">{{reco.input}}</div>
                    </div>
                </div>
                <div class='text-center' ng-show='cond.isMoreAvailable && sFlow.text == ""' >
                    {{'loading_more'| i18nString}} <br />
                    <i class='fa fa-circle-o-notch fa-spin-fast'></i>
                </div>
           </div>
        </div>

        <div class="modalBody padding0" ng-show='stateLoad.utterances'>
            <div class='loading-wrap'>
                <span class='loading-icon'>
                    <i class='fa fa-circle-o-notch fa-spin-fast'></i>
                </span>
                <span class='loading-text'>
                    {{'please_wait_exclamation'| i18nString}}
                </span>
            </div>
        </div>

      <!-- Body Ends Here -->
   </div>

   <div class="modalSliderContainer col-md-6 width610 right-separator noPadding" ng-show='chat.slider'>
        <div class="modalHeader">   
            <h4 class="modal-title">
                <img  class="backArrowSynonymsModal rightArrow" ng-src={{rightArrow}} ng-click="chat.slider = false;closeChatHistoryJsonModal()"/>
                {{'chat_history'| i18nString}}
            </h4>
        </div>
        <div style="padding-left: 10px !important;padding-right: 10px !important;" class="modalBody botchatHistoryContainer noPadding" dynamic-height height-property="height" dynaoffset="-100" perfect-scroll>
            <div ng-repeat="message in chatHistory.messages"  data-msg-id={{message._id}} ng-class="{'userMessageContainer':message.type==='incoming'}">
                <div class="time">{{helpers.formatDate(message.createdOn)}}</div>
                <div ng-if="message.type==='outgoing'" class="botResponse">
                    <div class="imgDiv"><img ng-src="{{stream.icon}}"/></div>
                    <div ng-if="!checkForTemplate(message.components[0].data.text)" class="msg" ng-bind-html="helpers.convertMDtoHTML(message.components[0].data.text,'bot')"></div>
                    <div  ng-if="checkForTemplate(message.components[0].data.text)" class="template" ng-init="renderTemplate(message,$element)"></div>
                    <div ng-if="checkForTemplate(message.components[0].data.text)" ng-click="showJSON(message)" class="openJavascriptIcon fa fa-ellipsis-h"></div>
                </div>

                <div ng-if="message.type==='incoming'" class="userMessage">
                    <div class="msg" ng-class="{'borderOrange':messageIdClicked===message._id}" ng-bind-html="helpers.convertMDtoHTML(message.components[0].data.renderMsg?message.components[0].data.renderMsg:message.components[0].data.text,'user')"></div>
                    <img ng-src="{{assetsBase}}images/left-menu-img/logo-copy.svg"/>
                </div>
                <div class="entityMatched" ng-if="messageIdClicked===message._id">{{winningIntentData}}</div>
                <div class ="messageTags" ng-if="message.msgTagValue.length" ng-class="{'showRightMessageTags':message.type==='outgoing'}">
                    <div class="showMessageTags" >
                      <span> <img class="moveUp" ng-click="showNextMessageTag(message,'showPreviousIcon')" ng-if="previousMessageTag" ng-src="{{moveUpIcon}}">
                     </span>
                      <span class="showMessageTag">
                         <span class="chatHistoryMessageTag">
                         {{message.msgTagValue[messageIndex].name}}:{{message.msgTagValue[messageIndex].value}}
          
                         </span>
                      </span> 
                      <span>
                      <img class="moveDown" ng-click="showNextMessageTag(message,'showNextIcon')" ng-if="message.msgTagValue.length > 1 && nextMessageTag" ng-src="{{moveDownIcon}}">
                       </span>
                      <span class="showMessageCount" ng-show="message.messageTagLength > 0"> +{{message.messageTagLength}}</span>
                  </div>
                </div>
            </div>
            <div class="noHistory" ng-show="chatHistory.messages.length === 0"> {{'no_chat_history_found'| i18nString}}</div>
        </div>
   </div>

   <div class="modalSliderContainer width610 col-md-6 padding0" ng-show='gps.groupsShow'>
      <!--Header Starts Here -->
        <div class="modalHeader">   
            <h4 class="modal-title"><img class="closeCross" ng-src={{closeCross}} ng-click="sFUttModalClose()"/>
                {{'groups_label'| i18nString}}
            </h4>
        </div>
        <!-- Header Starts Here -->
        <!-- Body Starts Here -->
        <div class="modalBody" dynamic-height height-property="height" dynaoffset="-100" perfect-scroll>
            <div class='list-group list-group-flush'>
                <a class='list-group-item cursor-pointer' ng-class="{'active': grps.isActive}" ng-repeat='grps in utteranceGroups track by $index' ng-click='$event.preventDefault();openGpsUttModal($event, grps);'>{{grps.utterance}} ({{grps.count}})</a>
            </div>
        </div>
    </div>

</bot-modal-slider>

<div class="jsonResponseContainer session" dynamic-height dynaoffset="-70" height-property="height">
    <div class="text"> {{'java_script_message'| i18nString}}</div>
    <div class="closeBtn"><span class="fa fa-close" ng-click="closeChatHistoryJsonModal()"></span></div>
    <div class="jsonPreTag conversionSession"><pre id="chatHistoryJson" perfect-scroll dynamic-height dynaoffset="-160" height-property="height"></pre></div>
</div>

<!-- <div class="modal" id='regroup'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class='modal-title'>Re-group Utterances</h4>
            </div>
            <div class="modal-body">
                Consider regrouping of your user utterances if you observe that the current groups contain too many unrelated utterances.
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click='scheduleCluster()' data-dismiss='modal'>Confirm</button>
                <button class="btn btn-cancel" data-dismiss='modal'>Cancel</button>
            </div>
        </div>   
    </div>
</div> -->
