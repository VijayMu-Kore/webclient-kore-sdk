 <div class="modalSliderContainer width700">
    <div class="modalHeader channelModalHeader">
        <h4 class="modal-title" id="gridSystemModalLabel">
            <i class="btx-close" ng-click="goToHome()"></i>
                {{'constants.iconsTooltips_ivrVoice'| i18nString}}
        </h4> 
        </div>
       <!--  <span aria-hidden="true">
            <i class="fa fa-close" ng-click="goToHome()" ></i>
        </span> -->
    <div class="modalBody slack-channel-page inner-scroll channelInnerContent" perfect-scroll dynamic-height dynaoffset="-125" height-property="height">
        <div class="col-xs-12 step-progress-container">
            <step-progress steps="steps" on-click="stepClick"></step-progress>
        </div>
        <div class="slcakChannels widthseventy">
            <div class="col-xs-12 noPadding" ng-show="steps[0].active">
                <div class="col-xs-12 channel-content">
                    <div class="info text-justify">
                        <p>{{'Bt_chnl_ivr_instruct_desc'| i18nString}}<br></p>
                        <div class="hintDiv">
                            <span class="icon"><i class="btx-bulb" ></i></span>
                            <span class="description" >
                                <p class="">{{'Bt_chnl_ivr_instruct_protip'| i18nString}}</p>
                            </span>
                        </div>
                        <div class="info marginTop20"> <p class="channelstep">{{'Bt_chnl_ivr_instruct_step1_label'| i18nString}}</p> 
                            <p>{{'Bt_chnl_ivr_instruct_step1_desc'| i18nString}}</p>
                        </div>
                        <div class="info"> <p class="channelstep">{{'Bt_chnl_ivr_instruct_step2_label'| i18nString}}</p> 
                            <p>{{'Bt_chnl_ivr_instruct_step2_desc'| i18nString}}</p>
                        </div>
                        <div class="info"> <p class="channelstep">{{'Bt_chnl_ivr_instruct_step3_label'| i18nString}}</p> 
                            <p>{{'Bt_chnl_ivr_instruct_step3_desc'| i18nString}} </p>
                        </div>
                    </div>
                    <div class="info"> <p class="channelstep">{{'Bt_chnl_ivr_instruct_incoming_pyload_label'| i18nString}}</p> 
                        <p>{{'Bt_chnl_ivr_instruct_incoming_pyload_desc'| i18nString}}</p>
                        <pre>
                                payload : {
                                    “from”: “optional user id”,
                                    “message”: “sample message from user”,
                                    “callId”: ”reference to the current call conversation”
                                    }
                        </pre>
                    </div>
                    <div class="hintDiv">
                        <span class="icon"><i class="btx-bulb" ></i></span>
                        <span class="description" >
                            <p class="">{{'Bt_chnl_ivr_instruct_incoming_protip'| i18nString}}</p>
                            <ol>
                                <li>{{'Bt_chnl_ivr_instruct_incoming_protip_li1'| i18nString}}</li>
                                <li>{{'Bt_chnl_ivr_instruct_incoming_protip_li2'| i18nString}}</li>
                                <li>{{'Bt_chnl_ivr_instruct_incoming_protip_li3'| i18nString}}</li>
                                <li>{{'Bt_chnl_ivr_instruct_incoming_protip_li4'| i18nString}}</li>
                                <li>{{'Bt_chnl_ivr_instruct_incoming_protip_li5'| i18nString}} </li>
                           </ol> 
                        </span>
                    </div>

                    <div class="footer modal-header hide  form-group noMargin" ng-if="displayMode !== 'view'">
                        <div class="footerSub">
                            <div class="col-xs-3"><button type="button"  ng-click="$parent.goToHome()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">+</span></button></div>

                            <div  class="col-xs-6 lineheight"><div class="form-ctrl-div pull-left hide">
                                    <button type="button"  class="btn btn-default" ng-click="$parent.goToHome()">{{'exit_label'| i18nString}}</button>
                                </div>
                                <div class="help-hint-link"> <a target="_blank"  ng-href="{{$root.helpLinks.ADD_CHANNEL_WFACEBOOK}}">{{'help_withpage_label'| i18nString}}</a> </div>
                            </div>
                            <div class="col-xs-3">
                                <div class="pull-right form-ctrl-div">
                                    <button type="button"  class="btn btn-primary" ng-click="$parent.next(2)">{{'next'| i18nString}}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div></div>
            <div class="col-xs-12 noPadding" ng-show="steps[1].active">
                <div class="loaderLayer animationIfLeave" ng-if="loadingAppDetails">
                    <span class="spinner-text"> 
                        <i class="fa fa-circle-o-notch fa-spin-fast"></i> 
                        <span class="spinner-text-content">{{'loading_configurations'| i18nString}}</span>
                    </span>
                </div>
                 <form name="ivrDetailForm">
                        <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published','marginBottom15': ((channel.isSandboxEnabled && !channel.sandboxDetails.phoneNo) || !channel.isSandboxEnabled)}">
                                <div class="col-xs-12 form-group noPadding mb-0">
                                    <label>{{'Bt_chnl_ivr_config_kore_label'| i18nString}}</label>
                                    <p>{{'Bt_chnl_ivr_config_kore_desc'| i18nString}}
                                    </p>
                                </div>
                                <div class="radioDiv">
                                    <div>
                                        <label for="channel.isSandboxEnabled.no">
                                            <input ng-value="false" ng-checked="true" type="radio" ng-model="channel.isSandboxEnabled" name="channel.isSandboxEnabled" id="channel.isSandboxEnabled.no" class="ng-pristine ng-untouched ng-valid" value="false" checked="checked"><span class="opt-title">{{'Disable'| i18nString}}</span> 
                                        </label>
                                    </div>
                                    <div >
                                        <label for="channel.isSandboxEnabled.yes">
                                            <input ng-value="true" type="radio" ng-model="channel.isSandboxEnabled" name="channel.isSandboxEnabled" id="channel.isSandboxEnabled.yes"  class="ng-pristine ng-untouched ng-valid" value="true">
                                            <span class="opt-title">{{'Enable'| i18nString}}</span> 
                                        </label>
                                    </div>
                                </div>                              

                                <div class="help_hint_data mb-0" ng-if="channel.isSandboxEnabled && callback.enabled">
                                    <div class="bulb-icon">
                                        <i class="btx-bulb"></i>
                                    </div>
                                    <div class="hint-content">{{'bt_chnnl_ivrV_configurating_link_p1'| i18nString}} <a target="blank" ng-click="redirectToLinkforSandbox('SANDBOX_CONFIGURATION', $event)">{{'here'| i18nString}}</a> {{'bt_chnnl_ivrV_configurating_link_p2'| i18nString}}</div>
                                </div>
                            </div>
                            <div class="channel-content ivr-channel" ng-show="channel.sandboxDetails && channel.sandboxDetails.phoneNo && channel.isSandboxEnabled">
                                <div class="col-xs-11 ivr-channel marginLeft15 noPadding" >
                                    <div class="edit-appDetailsDiv noMarginTop">
                                        <div class="row form-group">
                                            <div class="form-ele-title col-xs-12" >{{'constants.nlp.value'| i18nString}} <div class="pull-right copyResetbuttons" data-clipboard-target="#sandBoxPhoneNum_addChnl"> {{'copy'| i18nString}} </div></div>
                                            <div class="col-xs-12">
                                                <input id="sandBoxPhoneNum_addChnl" readonly class="form-control" ng-model='channel.sandboxDetails.phoneNo' type="text"/>
                                            </div>
                                            <!-- <div class="col-xs-2">
                                                <button  data-clipboard-target="#sandBoxPhoneNum_addChnl"  type="button" class="btn btn-primary btnCopySave" >Copy</button>
                                            </div> -->
                                        </div>
                                        <div class="row form-group" >
                                            <div class="form-ele-title col-xs-12" >{{'pin_tooltip'| i18nString}} <div class="pull-right copyResetbuttons" data-clipboard-target="#sandBoxPin_addChnl"> {{'copy'| i18nString}} </div></div>
                                            <div class="col-xs-12">
                                                <div>
                                                    <input  id="sandBoxPin_addChnl" readonly class="form-control" value='{{channel.sandboxDetails.pin}}' type="text"/>
                                                </div>
                                            </div>
                                            <!-- <div class="col-xs-2">
                                                <button  data-clipboard-target="#sandBoxsPin_addChnl"  type="button" class="btn btn-primary btnCopySave" >Copy</button>
                                            </div> -->
                                        </div>
                                        <div class="row form-group"  >
                                            <div class="form-ele-title col-xs-12" >{{'secret_label'| i18nString}} 
                                            <div class="pull-right copyResetbuttons" ng-click="clientSecretCopy()" data-clipboard-target="#sandBoxSecret_addChnl">{{'copy'| i18nString}}</div>
                                            <span class="pull-right seperatorReset">|</span>
                                            <div ng-class="{'screenFreeze':streamState.state=='published'}" class="pull-right copyResetbuttons" ng-click="resetClientId()"><i class="fa fa-repeat resetIcon"></i>{{'reset_btn_label'| i18nString}}</div>
                                            </div>
                                            <div class="col-xs-12">
                                                <div>
                                                    <input id="sandBoxSecret_addChnl" readonly class="form-control" value='{{channel.sandboxDetails.secret}}' type="text"/>
                                                </div>
                                            </div>
                                            <!-- <div class="col-xs-2">
                                                <button  data-clipboard-target="#sandBoxSecret_addChnl"  type="button" class="btn btn-primary btnCopySave" >Copy</button>
                                            </div> -->
                                        </div>
                                     
                                    </div>
                                </div>
                            </div>
                    <div class="channel-content ivr-channel">
                        <div class="row form-group col-xs-11">
                            <div  ng-show="apps.length < 1" class="apps-empty">
                                <div>{{'you_dont_have_any_apps_now'| i18nString}}</div>
                                <div ng-class="{'screenFreeze':streamState.state=='published'}">{{'bt_chnl_rtm_chnl_create_app'| i18nString}} <a ng-click="createApp()">{{'create_app'| i18nString}}</a></div>
                                <div ng-bind-html="'read_app_creation'| i18nString:({link:$root.helpLinks.CREATE_APP})"></div>
                            </div>
                            <div class="form-ele-title col-xs-8 noPadding" ng-show="apps.length > 0" ><label class="required-field">{{'Bt_chnl_config_selectApp_label'| i18nString}}</label></div>
                            <div class="col-xs-8 selectAppInput noPadding" ng-show="apps.length > 0" ng-class="{'screenFreeze':streamState.state=='published'}">
                                <!-- <select id="select2" ui-select2="selectConfig" ng-disabled="isNonEditable" data-placeholder="{{'choose'| i18nString}}" ng-model="selectedApp">
                                    <option value=""></option>
                                    <option value="create" ng-class="{'screenFreeze':streamState.state=='published'}">{{'create_app'| i18nString}}</option>
                                    <optgroup label="{{'select_app'| i18nString}}" >
                                        <option ng-repeat="app in apps" ng-selected="{{app.clientId === selectedAppView.clientId}}" value="{{app.clientId}}" >{{app.appName}}</option>
                                    </optgroup>
                                </select> -->
                                <div class="kr-sg-dropdowns selectapp-dropdown">                                        
                                    <div class="dropdown dropdown-open open">
                                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{selectedAppView.appName || 'Choose'}}</button>                                            
                                        <ul class="dropdown-menu content-menu" perfect-scroll style="max-height: 250px;">
                                          <li ng-click="createApp()" ng-class="{'screenFreeze':streamState.state=='published'}"><a >{{'create_app'| i18nString}}</a></li>
                                          <li class="selectTitle">{{'select_app'| i18nString}}</li>
                                          <li ng-repeat="app in apps" ng-click="onSelectedApp(app.clientId)"><a title="{{app.appName}}">{{app.appName}} <span class="check-icon pull-right" ng-if="selectedAppView.clientId === app.clientId"><i class="btx-check"></i></span></a></li>
                                        </ul>
                                      </div>
                                </div>
                                
                            </div>
                            <div class="col-xs-3 appButtonsDiv" ng-hide="isNonEditable" ng-class="{'screenFreeze':streamState.state=='published'}">
                                <span class="appButtons displayFlex">
                                    <button ng-show="selectedAppView.clientId" ng-click="editApp()" type="button" class="btn marginRight10" >{{'edit'| i18nString}}</button>
                                    <button ng-click="createNewApp()" type="button" class="btn" >{{'add'| i18nString}}</button>
                                </span>
                            </div>
                        </div>
                        <div class="col-xs-11 ivr-channel marginLeft15 noPadding" ng-show="selectedAppView.clientId">
                            <div class="edit-appDetailsDiv">
                                <div class="row form-group">
                                    <div class="form-ele-title col-xs-10" >{{'botName'| i18nString}}</div>
                                    <div class="col-xs-10 noPaddingRight">
                                        <input id="botname" readonly class="form-control" ng-model='stream.name' type="text"/>
                                    </div>
                                    <div class="col-xs-2">
                                        <button  data-clipboard-target="#botname"  type="button" class="btn btn-primary btnCopySave" >{{'copy'| i18nString}}</button>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="form-ele-title col-xs-10" >{{'bot_id'| i18nString}}</div>
                                    <div class="col-xs-10 noPaddingRight">
                                        <input readonly id="botId" class="form-control" ng-model='stream._id' type="text"/>
                                    </div>
                                    <div class="col-xs-2">
                                        <button  data-clipboard-target="#botId"  type="button" class="btn btn-primary btnCopySave" >{{'copy'| i18nString}}</button>
                                    </div>
                                </div>
                                <div class="row form-group" ng-show="selectedAppView.clientId">
                                    <div class="form-ele-title col-xs-8" >{{'clientId_label'| i18nString}}</div>
                                    <div class="col-xs-10 noPaddingRight">
                                            <input id="clientId_addChnl" readonly class="form-control" value='{{selectedAppView.clientId}}' type="text"/>
                                    </div>
                                    <div class="col-xs-2">
                                        <button  data-clipboard-target="#clientId_addChnl"  type="button" class="btn btn-primary btnCopySave" >{{'copy'| i18nString}}</button>
                                    </div>
                                </div>
                                <div class="row form-group"  ng-show="selectedAppView.clientId">
                                    <div class="form-ele-title col-xs-8" >{{'clientsecret_label'| i18nString}}</div>
                                    <div class="col-xs-10 noPaddingRight">
                                        <div>
                                            <input ng-show="secretKeyShown" id="secretKeyId_addChnl" readonly class="form-control" value='{{selectedAppView.clientSecret}}' type="text"/>
                                            <input ng-hide="secretKeyShown" disabled                  class="form-control" value='{{selectedAppView.clientSecret| mask}}' type="text"/>
                                        </div>
                                    </div>
                                    <div class="col-xs-2">
                                        <button ng-show="secretKeyShown" data-clipboard-target="#secretKeyId_addChnl"  type="button" class="btn btn-primary btnCopySave" >{{'copy'| i18nString}}</button>
                                        <button ng-hide="secretKeyShown" ng-click="showHideSecret()" type="button" class="btn btn-primary btnCopySave" >{{'view'| i18nString}}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                <div class="col-xs-12 channel-content">
                    <div class="col-xs-12 form-group noPadding mb-0">
                        <div class="col-xs-10 noPadding">
                            <label>{{'webhookurl_label'| i18nString}}</label>
                        </div>
                        <div class="col-xs-10 noPadding">{{'Bt_chnl_ivr_config_webhook_desc'| i18nString}}</div>
                        <div class="col-xs-10 paddingTopBottom10">
                            <div class="input-group">
                                <input type="text" id="ivroauthuri{{step.step}}" class="form-control" ng-model="channel.oAuthRedirectURI" ng-readonly="true" name="appName">
                                <div class="input-group-addon pointer-hand" data-clipboard-target="#ivroauthuri{{step.step}}"> {{'copy'| i18nString}} </div>  
                            </div> 
                            <div ng-show="isSafariwebhook"><span class="pull-right">{{'press_c'| i18nString}}<span></div>              
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published'}">
                    <div class="col-xs-12 form-group noPadding mb-0">
                        <label>{{'enable_chnl'| i18nString}}</label>
                    </div>
                    <div class="radioDiv">
                        <div>
                            <label for="channel.enable.no">
                                <input ng-value="false" ng-checked="true" type="radio" ng-model="channel.enable" name="channel.enable" id="channel.enable.no" value="false" checked="checked"><span class="opt-title">{{'no'| i18nString}}</span> 
                            </label>
                        </div>
                        <div >
                            <label for="channel.enable.yes">
                                <input ng-value="true" type="radio" ng-model="channel.enable" name="channel.enable" id="channel.enable.yes" value="true">
                                <span class="opt-title">{{'yes'| i18nString}}</span> 
                            </label>
                        </div>
                    </div>
                </div>
                 <div class="footer modal-header hide form-group noMargin" ng-if="displayMode !== 'view'">
                     <div class="footerSub">
                         <div class="col-xs-3"><button type="button"  ng-click="$parent.goToHome()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">+</span></button></div>
                         <div  class="col-xs-6 lineheight">
                             <div class="form-ctrl-div pull-left hide">
                                 <button type="button"  class="btn btn-default" ng-click="$parent.goToHome()">{{'exit_label'| i18nString}}</button>
                             </div>
                             <div class="help-hint-link"> <a target="_blank"  ng-href="{{$root.helpLinks.ADD_CHANNEL_WFACEBOOK}}">{{'help_withpage_label'| i18nString}}</a> </div>
                         </div>
                         <div class="col-xs-3">
                             <div class="pull-right form-ctrl-div">
                                 <button type="button"  class="btn btn-default " ng-click="$parent.save(ivrDetailForm)">{{'save'| i18nString}}</button>
                                 <button type="button"  class="btn btn-primary " ng-disabled="ivrDetailForm.$invalid" ng-click="$parent.next(3)">{{'next'| i18nString}}</button>
                             </div>
                         </div>
                     </div>
                </div>
                 </form>
            </div>
             <div class="col-xs-12" ng-show="steps[2].active" ng-class="{'screenFreeze':streamState.state=='published'}">
                <bt-ivr-settings stream-id="{{streamId}}" callback="callback"></bt-ivr-settings>
            </div>
        </div>
    </div>
    <div class="modalFooter" >
        
        <button type="button" class="btn" ng-click="next(2)" ng-show="steps[0].active">{{'next'| i18nString}}</button>
        <button type="button" class="btn" ng-click="checkStreamState()" ng-show="steps[1].active" ng-class="{'screenFreeze':streamState.state=='published'}">{{'save'| i18nString}}</button>
        <button type="button" class="btn" ng-click="saveIvrStream()"    ng-show="steps[2].active && callback.enabled"  ng-class="{'screenFreeze':streamState.state=='published'}" >{{'save'| i18nString}}</button>
        <button class="btn closeCancel" ng-click="goToHome()">Cancel</button>
    </div>
</div>

