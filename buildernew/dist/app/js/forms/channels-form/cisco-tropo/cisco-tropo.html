<div class="modalSliderContainer width700">
    <form name="ciscoForm">
    <div class="modalHeader channelModalHeader">
        <h4 class="modal-title" id="gridSystemModalLabel">
                <i class="btx-close"   ng-click="goToHome()"></i>
                {{'constants.iconsTooltips_cisco'| i18nString}}
            </h4>

    </div>
    <div class="modalBody slack-channel-page inner-scroll channelInnerContent ciscoChannelContainer" perfect-scroll dynamic-height dynaoffset="-125" height-property="height">
        <div class="col-xs-12 step-progress-container">
            <step-progress steps="steps" on-click="stepClick"></step-progress>
        </div>
        <div ng-repeat="step in steps track by $index" ng-show="step.active" class="ciscoChannels" >
        <div class="col-xs-12 noPadding" ng-show="steps[0].active">
                    <div class="col-xs-12">
                        <div class="helphint-border col-xs-12">
                        <div class="col-xs-1 bulbicon">
                            <i class="layer btx-bulb"></i>
                        </div>
                        <div class="col-xs-11">
                          <span class="name " ng-bind-html="'tropo_channel_services'| i18nString:({link:'https://www.tropo.com/docs/winding-down-operations-faq/what-final-date-tropo-services'})"></span>
                        </div>
                    </div>

                    </div>
                    <div class="col-xs-12 channel-content paddingTop10">
                        <div class="info">  
                            <p class="channelstep">{{'Bt_chnl_cisco_instruct_step1_label'| i18nString}}</p>
                            <p ng-bind-html="'tropo_login_link'| i18nString:({link:'https://www.tropo.com/'})"></p>
                            <img ng-src="{{assetsBase}}/images/Tropo-1.png"  class="marginBottom10 width100percent"/>
                            <p>{{'Bt_chnl_cisco_instruct_step1_note'| i18nString}}</p>
                        </div>
                    </div>
                    <div class="col-xs-12 channel-content paddingTop10">
                        <div class="info">  
                            <p class="channelstep">{{'Bt_chnl_cisco_instruct_step2_label'| i18nString}}</p>
                            <p>{{'Bt_chnl_cisco_instruct_step2_desc'| i18nString}}</p>
                            <img ng-src="{{assetsBase}}/images/Tropo-2.png"  class="marginBottom10 width100percent"/>
                            <p>{{'Bt_chnl_cisco_instruct_step2_note'| i18nString}}</p>
                        </div>
                    </div>
              </div>
                <div class="col-xs-12 noPadding" ng-show="steps[1].active">
                    <div class="col-xs-12 channel-content callbackUrlDiv">
                        <div class="info p-0"> {{'Bt_chnl_cisco_config_label'| i18nString}}
                        <div class="col-xs-12 form-group noPadding marginTopBottomTen">
                            <div class="col-xs-12 noPadding">
                                <label>{{'callback_url_name'| i18nString}}</label>
                            </div>
                            <div class="col-xs-12 noPadding">
                                <div class="input-group">
                                    <input type="text" id="callBackUrl{{$index}}" class="form-control" ng-model="serverUrl" ng-readonly="true" name="callBackUrl">
                                    <div class="input-group-addon pointer-hand" data-clipboard-target="#callBackUrl{{$index}}"> {{'copy'| i18nString}} </div>
                                </div> 
                                <div ng-show="isSafariwebhook"><span class="pull-right">{{'press_c'| i18nString}}<span></div>              
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published'}">
                        <div class="info p-0">
                            <div class="col-xs-12 form-group noPadding">
                                <div class="col-xs-12 noPadding">
                                    <label class="required-field">{{'Bt_chnl_cisco_config_applicationName_label'| i18nString}}</label>
                                </div>
                                <div class="col-xs-12 noPadding">
                                    <input type="text" class="form-control" ng-model="channel.applicationName" name="applicationName" required="">
                                    <div  ng-show="ciscoForm.applicationName.$dirty || clientIDRequired">
                                        <div error-alert ng-show="ciscoForm.applicationName.$error.required" class="text-danger">
                                            {{'please_provide_application_name'| i18nString}}
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published'}">
                        <div class="info p-0">
                            <div class="col-xs-12 row form-group noPadding">
                                <div class="col-xs-12 noPadding">
                                    <label class="required-field">{{'Bt_chnl_cisco_config_applicationType_label'| i18nString}}</label>
                                </div>
                                <div class="col-xs-12 noPadding">
                                    <input type="text" class="form-control" ng-model="channel.applicationType" name="applicationType" required="">
                                    <div  ng-show="ciscoForm.applicationType.$dirty || clientIDRequired">
                                        <div error-alert ng-show="ciscoForm.applicationType.$error.required" class="text-danger">
                                            {{'pls_provide_application_type'| i18nString}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published'}">
                        <div class="info p-0">
                            <div class="col-xs-12 row form-group noPadding mb-0">
                                <div class="col-xs-12 noPadding">
                                    <label class="">{{'Bt_chnl_cisco_config_phneNum_label'| i18nString}}</label>
                                </div>

                                <div class="input-group full-width">
                                    <div class="col-xs-12 row form-group noPadding mb-0" ng-repeat="phoneNumber in channel.numbers track by $index">
                                        <div class="col-xs-12 noPadding">
                                            <div auto-close="outsideClick" class="country-codes no-margin dropdown">

                                                <button  type="button" data-toggle="dropdown" class="country-codes-toggle dropdown-toggle"
                                                         ng-click="searchCountryCodes = ''">
                                                    <!-- {{countryCodeChoosen.value}} -->
                                                    {{phoneNumber.countryCode}}<i class="fa fa-chevron-down"></i>
                                                </button>
                                                <div class="dropdown-menu dropdown-menu-left">

                                                    <!-- Search -->
                                                    <div class="navbar-search-wrapper">
                                                        <div class="navbar-search">
                                                            <div class="search-bar">
                                                                <input type="text" ng-model="searchCountryCodes"
                                                                       class="form-control"
                                                                       placeholder="{{'search_name'| i18nString}}">
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- <perfect-scrollbar suppress-scroll-X="true"
                                                                       refresh-on-change="[_constants_.countryCodes,searchCountryCodes]"
                                                                       class="country-codes-content"> -->
                                                    <ul class="country-codes-ul" perfect-scroll dynamic-height dynaoffset="-430"> 
                                                        <div class="scroll-data">
                                                            <li data-ng-repeat="item in _constants_.countryCodes | filter:{name:searchCountryCodes}">
                                                                <a data-ng-click="selectItem(item, $parent.$index)" data-ng-hide="">
                                                                    <span class="name">{{item.name}}</span>
                                                                    <span class="value">{{item.value}}</span>
                                                                </a>
                                                            </li>
                                                        </div>                                                        
                                                    </ul>
                                                </div>
                                               <input type="text" 
                                                       name="phoneOnly{{$index}}" 
                                                       class="form-control  phone-field"
                                                       phone-only="true" 
                                                       country-code={{phoneNumber.countryCode}} 
                                                       placeholder="{{'Bt_chnl_cisco_config_phneNum_placeholder'| i18nString}}" ng-model="phoneNumber.number" email-phone>
                                                <span class="bt-mb-delete" ng-if="channel.numbers.length !== 1" style="color:#ff5d6d;"><a ng-click="deleteMobileField($index)"><i class="fa fa-minus-circle"></i></a></span>
                                                <div ng-if="$index === channel.numbers.length-1">

                                                    <span class="pull-right bt-mob-add"><a ng-click="addNewMobileField($index)"><i class="fa fa-plus"></i> {{'add_row'| i18nString}}</a></span></div>
                                                <div  ng-show="ciscoForm.phoneOnly{{$index}}.$dirty">
                                                    <div error-alert ng-show="ciscoForm.phoneOnly{{$index}}.$error.invalidFormat" class="text-danger">
                                                        {{'pls_enter_valid_phone_number'| i18nString}}
                                                    </div>
                                                    <div error-alert ng-show="ciscoForm.phoneOnly{{$index}}.$error.mobRequired" class="text-danger">
                                                        {{'pls_enter_phone_number'| i18nString}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span class="input-group-btn" ng-hide="true">
                                        <button  type="button"
                                                 ng-disabled="!channelForm.phoneOnly.$valid || vm.phoneNo.length === 0 || vm.phoneNo === null"
                                                 class="search-submit btn btn-primary" ng-click="vm.textMe(vm.phoneNo)">{{'add'| i18nString}}
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published'}">
                        <div class="info p-0">
                        <div class="col-xs-12 row form-group noPadding">
                        <div class="col-xs-12 noPadding">
                            <label class="required-field">{{'apikey_label'| i18nString}}</label>
                        </div>
                        <div class="col-xs-12 noPadding">
                            <input type="text" class="form-control" ng-model="channel.clientApi" name="clientApi" required="">
                            <div  ng-show="ciscoForm.clientApi.$dirty || clientSecretRequired">
                                <div error-alert ng-show="ciscoForm.clientApi.$error.required" class="text-danger">
                                    {{'pls_provide_api_key'| i18nString}}
                                </div>
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>
                    <div class=" col-xs-12 channel-content">
                        <send-contact callback="sendContactCB"></send-contact>
                    </div>

                    <div class="col-xs-12 channel-content" ng-class="{'screenFreeze':streamState.state=='published'}">
                        <div class="info p-0">
                            <label>{{'enable_chnl'| i18nString}}</label>
                            <p>{{'Bt_chnl_cisco_config_enablechnl_desc'| i18nString}}</p>
                            <div class="col-xs-12 radioDiv noPadding">
                                <div>
                                    <label for="channel.enable.no" >
                                        <input ng-value="false" ng-checked="true" type="radio" ng-model="channel.enable" name="channel.enable" id="channel.enable.no" class="ng-pristine ng-untouched ng-valid" value="false" checked="checked"><span class="opt-title">{{'no'| i18nString}}</span> 
                                    </label>
                                </div>
                                <div>
                                    <label for="channel.enable.yes">
                                        <input ng-value="true" type="radio" ng-model="channel.enable" name="channel.enable" id="channel.enable.yes"  class="ng-pristine ng-untouched ng-valid" value="true"><span class="opt-title">{{'yes'| i18nString}}</span> 
                                    </label>
                                </div>
                            </div>
                        </div></div>

                </div>
            </div>
    </div>
    <div class="modalFooter">
        <button type="button" class="btn" ng-click="next(2)" ng-show="steps[0].active">{{'next'| i18nString}}</button>
        <button type="button" class="btn" ng-click="save(ciscoForm)" ng-show="steps[1].active" ng-class="{'screenFreeze':streamState.state=='published'}">{{'save'| i18nString}}</button>
        <button class="btn closeCancel" ng-click="goToHome()">Cancel</button>
    </div>
        </form>
</div>

