<div class="modalSliderContainer width700">
    <form name="jabberForm">
    <div class="modalHeader channelModalHeader">
        <h4 class="modal-title" id="gridSystemModalLabel">
          <i class="btx-close" ng-click="goToHome()"></i>
            {{'bt_chnl_Jabber_header'| i18nString}}
          </h4>
 </div>
    <div class="modalBody slack-channel-page inner-scroll channelInnerContent" perfect-scroll dynamic-height dynaoffset="-125" height-property="height">
      <div class="col-xs-12 step-progress-container">
        <step-progress steps="steps" on-click="stepClick"></step-progress>
    </div>  
      <div ng-repeat="step in steps" ng-show="step.active" class="slcakChannels widthseventy">

            <div class="col-xs-12 noPadding" ng-show="steps[0].active">
        <div class="col-xs-12 channel-content">

          <div class="info">
            <p>
              {{'Bt_chnl_jabber_instruct_label'| i18nString}}
</p>

          </div>

            <div class="info">
              <p class="channelstep">{{'Bt_chnl_jabber_payload_post'| i18nString}}</p>
            <p>
              {{'Bt_chnl_jabber_payload_post_desc'| i18nString}}  

</p>
<pre>
            {
                "message": {
                "text" : "Hi"
                }
                "to" : "&lt;recipient-id/group-id&gt;",
                "from" : "&lt;sender-id&gt;"
             }
</pre>
          </div>

            <div class="info">
              <p class="channelstep">{{'Bt_chnl_jabber_webhook_payload_label'| i18nString}} </p>
            <p>
              {{'Bt_chnl_jabber_webhook_payload_desc'| i18nString}} 
</p>
<pre>

            {
                "message": {
                    "text" : "&lt;Message&gt;",
                    "attachments" : [&lt;array of attachment links (optional)&gt;]
                },
                "from" : {
                    "id": "&lt;unique-id-of-sender(mandatory)&gt;",
                    "userInfo" : {
                      "firstName" : "&lt;first-name(optional)&gt;",
                      "lastName" : "&lt;second-name(optional)&gt;",
                      "email" : "&lt;email(optional)&gt;"               
                    }
                },
                "to" : {
                    "id": &lt;unique-id-of-recipient(mandatory)&gt;,
                    "groupInfo" : { //If message comes from a group/team/room conversations.
                        "id" : "&lt;unique-id-of-group&gt;",
                        "name": "&lt;group-name(optional)&gt;"
                    }
                }
            }


</pre>

          </div>

          <div class="info">
              <p>
                {{'Bt_chnl_jabber_suggestion'| i18nString}}
              </p>
          </div>
        <div class="footer modal-header hide  form-group noMargin" ng-if="displayMode!=='view'">
          <div class="footerSub">
                    <div class="col-xs-3"><button type="button"  ng-click="$parent.goToHome()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">+</span></button></div>
            
            <div  class="col-xs-6 lineheight"><div class="form-ctrl-div pull-left hide">
              <button type="button"  class="btn btn-default" ng-click="$parent.goToHome()">{{'exit_label'| i18nString}}</button>
            </div>
            <div class="help-hint-link"> <a target="_blank"  ng-href="{{$root.helpLinks.ADD_CHANNEL_WFACEBOOK}}">{{'help_withpage_label'| i18nString}}</a> </div>
            </div>
            <div class="col-xs-3">
            <div class="pull-right form-ctrl-div">
              <button type="button"  class="btn btn-primary" ng-click="$parent.next(2)">{{'next'| i18nString}}</button>
            </div>
            </div>
          </div>
        </div>
        </div></div>
     
      <div class="col-xs-12 noPadding" ng-show="steps[1].active">
        <div class="col-xs-12 channel-content">


              <div class="info">{{'Bt_chnl_jabber_config_label'| i18nString}} <!--Copy below webhook url in message endpoint under configuaration section-->
             <div class="col-xs-12 row form-group noPadding" ng-class="{'screenFreeze':streamState.state=='published'}">
                <div class="col-xs-12 noPadding">
                  <label class="required-field">{{'Bt_chnl_jabber_config_posturl'| i18nString}}</label>
                </div>
                <div class="col-xs-12 noPadding">
                  <input type="text" class="form-control" ng-model="channel.post_url" name="post_url" required="">
                  <div  ng-show="jabberForm.post_url.$dirty || post_urlRequired">
                    <div error-alert ng-show="jabberForm.post_url.$error.required" class="text-danger">
                      {{'please_provide_post_url'| i18nString}}
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xs-12 row form-group noPadding" ng-class="{'screenFreeze':streamState.state=='published'}">
                <div class="col-xs-12 noPadding">
                  <label class="">{{'access_token_uppercase'| i18nString}}</label>
                  <p>{{'Bt_chnl_jabber_config_access_token_label'| i18nString}} </p>
                </div>
                <div class="col-xs-12 noPadding">
                  <input type="text" class="form-control" ng-model="channel.app_token" name="app_token">
                  <div ng-show="jabberForm.app_token.$dirty || app_tokenRequired">
                    <div error-alert ng-show="jabberForm.app_token.$error.required" class="text-danger">
                      {{'please_provide_access_token'| i18nString}}
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xs-12 form-group noPadding">
                <p>{{'Bt_chnl_jabber_config_webhook_congig_label'| i18nString}}</p>
                  <div class="col-xs-12 noPadding">
                    <label>{{'Bt_chnl_jabber_config_webhookurl_label'| i18nString}}</label>
                  </div>
                  <div class="col-xs-12 noPadding">
                      <div class="input-group">
                          <input type="text" id="jabber_webhook_url{{step.step}}" class="form-control" ng-model="channel.webhook_url" ng-readonly="true" name="appName">
                          <div class="input-group-addon pointer-hand" data-clipboard-target="#jabber_webhook_url{{step.step}}"> {{'copy'| i18nString}} </div>  

                      </div> 
                      <div ng-show="isSafariwebhook"><span class="pull-right">{{'press_c'| i18nString}}<span></div>              
                  </div>
                </div>
              <div class="col-xs-12 row form-group noPadding" ng-class="{'screenFreeze':streamState.state=='published'}">
            <div class="col-xs-12 form-group noPadding">
                <label>{{'enable_chnl'| i18nString}}</label>
                <p>{{'Bt_chnl_jabber_config_enabl_chnl_desc'| i18nString}}</p>
            </div>

            <div class="col-xs-12 radioDiv noPadding">
                <div>
                    <label for="channel.enable.no" >
                        <input ng-value="false" ng-checked="true" type="radio" ng-model="channel.enable" name="channel.enable" id="channel.enable.no" class="ng-pristine ng-untouched ng-valid" value="false" checked="checked"><span class="opt-title">{{'no'| i18nString}}</span> 
                    </label>
                </div>
                <div>
                    <label for="channel.enable.yes">
                        <input ng-value="true" type="radio" ng-model="channel.enable" name="channel.enable" id="channel.enable.yes"  class="ng-pristine ng-untouched ng-valid" value="true"><span class="opt-title">{{'yes'| i18nString}}</span> 
                    </label>
                </div>
            </div>
        </div>
            

              </div>

        </div>
       
      </div>

    </div>
    </div>
    <div class="modalFooter">
      <button type="button" class="btn" ng-click="next(2)" ng-show="steps[0].active">{{'next'| i18nString}}</button>
      <button type="button" class="btn" ng-click="save(jabberForm)" ng-show="steps[1].active" ng-class="{'screenFreeze':streamState.state=='published'}">{{'save'| i18nString}}</button>
      <button class="btn closeCancel" ng-click="goToHome()">Cancel</button>
  </div>
        </form>
</div>

