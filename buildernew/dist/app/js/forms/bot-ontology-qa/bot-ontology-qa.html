<div class="botontologyqa">
    <div class="boqcontent full-height">
    <div class="boqbody full-height"  perfect-scroll dynamic-height dynaoffset="-110"  height-property="height">
        <form name="ontologyQAForm" novalidate> 
    <div class="usersaysseciton col-xs-12" ng-class="{'disablesNodeLevelEdit':(faqParentTermlockState.editLocked && !faqData.isRootTerm), 'paddingBottom100': faqData.responseType === 'dialog'}">
        <div class="bulbiconwrappernew col-xs-12 marginBottom10-imp qaProTip" ng-if="(faqParentTermlockState.editLocked && !faqData.isRootTerm)">
            <div class="col-xs-1 bulbicon step2BulbIcon"><i class="btx-bulb" ></i></div>
            <p class="step2Note"><i><b></b>{{'current_term'| i18nString}}</i></p>
        </div>
        <div class="userSaysContainer col-xs-12 noPadding">
            <label>Intent</label>
            <div ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
                <div class="radioDiv">
                    <span class="radioInnerDiv">
                        <label for="intentFaq" class="mb-0">
                            <input value='faq' ng-change='intentChange()' type="radio" ng-model="intent.selected" name="IntentSelection" id="intentFaq">
                            <span class='mr-40'>{{'faq'| i18nString}}</span>
                        </label>
                    </span>
                    <span class="radioInnerDiv">
                        <label for="intentTask" class="mb-0">
                            <input value='task' ng-change='intentChange()' type="radio" ng-model="intent.selected" name="IntentSelection" id="intentTask">
                            <span>{{'task'| i18nString}}</span>
                        </label>
                    </span>
                </div>
            </div>
            <div class="intentFaqLinkProtip" ng-if="showProtipLinkFaq">
                <div class="col-xs-1 infoGray"><span><img class="layer" ng-src='{{infoGray}}'></span></div>
                <div class="linkFaqProtip">
                    {{'intentLinkedProtip'| i18nString}} 
                </div>
                <button class="kr-sg-button-secondary" type="button" ng-if="!showEditButton" ng-click='showOntologyQAForm()'>{{'cancel'| i18nString}}</button>
                <button class="kr-sg-button-secondary" type="button" ng-if="showEditButton" ng-click="openSourceLinkFaqModal()">{{'edit'| i18nString}}</button>
            </div>    
                                
            <div class="input-box-intent-dispaly-name-tags col-xs-12">
                <div class="kr-sg-input-text"  ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
                    <div class="referenceClass mb-5">
                        <span class="linkingFaq" ng-show="callback.showLinkQuestionValue && callback.allFaqs.length && !showProtipLinkFaq && faqData && !faqData._id && faqData.responseType == 'message'" ng-click="openLinkingFaqSlider()">{{'linkExisitingQuestion'| i18nString}}
                            <span class="tooltip-custom">
                                <i class="helpIcon btx-help"></i>
                                <span class="tooltiptextalert" ng-click="$event.stopPropagation()">
                                   {{'youConnectCurrentPathFaq'| i18nString}} <a href="https://developer.kore.ai/docs/bots/bot-builder-tool/knowledge-task/taxonomy-based-kg/" target="_blank" class="learnMoreLink">{{'learn_more_label'| i18nString}}</a>
                                </span>
                            </span>
                        </span>
                        <span class="label-text">{{'intent_name'| i18nString}}</span>
                    </div>
                </div>
                <div class="col-xs-12 noPadding">
                    <div class="responsesection taskSection col-xs-12" ng-if='faqData.responseType=="dialog"'>
                        <div class="dropdown cursor-pointer" ng-class='{"disabled": curBot.state == "published","disablesNodeLevelEdit":noeditLinkFaq}'>
                            <div class='dropdown-toggle' ng-click='tasks.searchString=""' data-toggle='dropdown'>{{task.selected}}<i class='fa fa-caret-down'></i> </div>
                            <ul class='dropdown-menu'>
                                <label for='searchTask' class="w-100">
                                    <img ng-src="{{searchIconGray}}" class='searchIcon'>
                                    <input id='searchTask' type='text' placeholder="{{'search_task'| i18nString}}" ng-model='tasks.searchString' ng-click='$event.stopPropagation();'>
                                </label>
                                <div class='add-scroll'>
                                    <li ng-repeat='task in alldialogTasks | filter: {"name": tasks.searchString}' class='tasksList' ng-click='taskSelected(task)'>
                                        <i class='fa fa-check marginRight10' ng-class="{'visible': task.state, 'no-visible': !task.state}"></i>
                                        {{(task.child && (kt.state!='published' || kt.state!='suspended'))?task.child[0].name:task.name}}
                                    </li>
                                </div>
                            </ul>
                        </div>
                    </div>               
                    <div class="userQuestionContainer" ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
                        <div id="qdata{{$index}}" class="usersaysbox" ng-repeat="qdata in qModel track by $index" ng-class="{'faqChangeBorder':(showDuplicateSymbol && $index==0)}">
                            <i class="trashIcon btx-delete-1" ng-show='qModel.length > 2 && curBot.state != "published"' ng-click='removeUserSaysRow($index)'></i>
                            <span class="dot" ng-show="qModel.length == 1"></span>
                            <div class="usersays col-xs-12 noPadding">
                                <div class="col-xs-12 noPadding border-light-bottom">
                                    <textarea rows="3" ng-model="qdata.question" encode-decode ng-init="getPossibleTags(qdata)" ng-blur="getPossibleTags(qdata)" ng-keyup="displayNameFocus(kt)"
                                    placeholder='{{(faqData.responseType=="dialog"&&$index==0)? addUtterance :(faqData.responseType=="dialog"&&$index!=0)?(addAltUtterance):(faqData.responseType=="message"&&$index==0)?addQuestion :addAltQuestion}}' ng-keydown='checkKey($event)' class="form-control" name="question{{$index}}" ng-minlength="1" maxlength="2048" ng-focus='addNewTextArea($event)' ng-class='{"pl-70": qdata.question.indexOf("||") == 0 && qdata.question.indexOf("|||") != 0 && $index != 0}'></textarea>
                                    <span class="showDuplicateFaqIcon" ng-show="showDuplicateSymbol && $index==0">                      
                                         <span class="tooltip-custom">
                                        <i class="exclamationTriangleRed btx-warning"></i>
                                        <span class="tooltiptextalert" ng-click="$event.stopPropagation()">
                                            {{'duplicateQuestionNotAllowed'| i18nString:({dyn:qModel[0].question})}}
                                        </span>
                                    </span>
                                </span>
                                    <a tabindex="0" ng-show='qdata.question.indexOf("||") == 0 && qdata.question.indexOf("|||") != 0 && $index != 0' class="pattern-text popovers" data-placement='top' role="button" data-toggle="popover" data-content={{dataContent.pattern}} data-trigger='hover'>{{'pattern_label'| i18nString}}</a>
                                </div>
                            </div>
                            <div class="tags onto-tags col-xs-12 noPadding suggest-terms" ng-hide="$index === (qModel.length-1)" ng-class='{"disabled": curBot.state == "published"}'>
                                <tags-input min-length="1" add-on-comma="false" add-from-autocomplete-only = 'false' ng-model="qdata.tagsPayload" on-tag-clicked="openUpdateTagModal($tag)" show-on-focus='true' display-property="tag" class='onto-qa-tags'>
                                    <auto-complete auto-complete-id="qTags{{$index}}" id="qTags{{$index}}" min-length="1" select-first-match='false' highlight-matched-text="false" source="qdata.suggestedTags"></auto-complete>
                                </tags-input>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="responsesection displayName col-xs-12 mb-0 mt-10" ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
                    <div class="kr-sg-input-text">
                        <div class="referenceClass">
                            <span class="label-text">{{'display_Name'| i18nString}}</span>
                            <span>
                                <span class="tooltip-custom">
                                    <i class="helpIcon btx-help"></i>
                                    <span class="tooltiptextalert j-alignment" ng-click="$event.stopPropagation()">
                                        {{'displayNamePresenting'| i18nString}} 
                                    </span>
                                </span>
                            </span>
                        </div>
                        <input type="text" placeholder="{{'displaynamePlaceholder'| i18nString}}" ng-model="faqDisplay.faqDisplayName" class="input-text" ng-blur="displayFocusOut()">
                    </div>
                </div>
            </div>            

        </div> 
    </div>

<!--     <div class="messageDropdown row dropdown">
        <span class="dropdown-toggle" type="button" data-toggle="dropdown">{{faqData.responseType | responseTypeFilter}}
            <img ng-src="{{caretDown}}" class="caretDown">
        </span>
        <ul class="dropdown-menu send-mess">
            <li class='ddList cursor-pointer' ng-class="{'active': activeResponse == 'message'}" ng-click="selectResponseType('message')"><i class="fa fa-check" aria-hidden="true"></i><span href="#">Send Message</span></li>
            <li class='ddList cursor-pointer' ng-class="{'active': activeResponse == 'dialog'}" ng-click="selectResponseType('dialog')"><i class="fa fa-check" aria-hidden="true"></i><span href="#">Run a Task</span></li>
        </ul>
    </div> -->




    <div ng-if='faqData.responseType=="message"' class="responsesection col-xs-12 marginTop10" ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
        <label>{{'bot_response_label'| i18nString}}</label>
        <div class="responseblock col-xs-12 ">
                    <div id="rdata{{parentIndex}}" class="resposneInnerSection col-xs-12 marginBottom15" ng-init="parentIndex = $index" ng-repeat="rdata in rModel track by $index">
                    <div class="form-group row col-xs-12 responseDiv">
                        <div class="editor-chooser" ng-class='{"disabled": curBot.state == "published"}'>
                            <button type="button" class="btn noMargin disableEditException" ng-class="{active: rdata.type == 'basic'}" ng-click="notifyUser(rdata, 'basic')">{{'standard_text'| i18nString}}</button>
							<button type="button" class="btn noMargin disableEditException" ng-class="{active: rdata.type == 'uxmap'}" ng-click="notifyUser(rdata, 'uxmap')">{{'advanced_mode'| i18nString}}</button>
                                                        <sample-tempalets class="ontologySamples" ng-if="rdata.type == 'uxmap'" selected-channel="rdata.channel" selected-callback="rdata.text" demo-templates="demoTemplates" tab-index="currentTabIndexOfPage2"></sample-tempalets>
                            <div class="channelBtn">
								<select class="channelSelector" ng-if="!boc.isFromKora" ng-change="childResChannelChange(rdata)" ng-model="rdata.channel">
				                    <option value="default">{{'all_channels'| i18nString}}</option>
				                    <option ng-repeat="option in availableChannels" value="{{option.id}}">{{option.name}}</option>
				                </select>                                
<!--                                  <span class="addResponse" ng-click="addOnResponse(rdata,parentIndex)"><img ng-src="{{channelsDropdown}}" class="addResponseIcon"/></span> -->
							</div>
						</div>
                        <div class="markdownDiv" ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
                                <markdown-editor callback="markdownCB2" mode="!boc.isEditable()" name="text{{parentIndex}}" markdownid="markdown_editor{{parentIndex}}" config="{popupModal : true}" ng-model="rdata.text" encode-decode ng-if="rdata.type == 'basic'" no-focus="nofocus">
                                
                                    </markdown-editor>                                
                                <i class="btx-delete-1 trashIcon" ng-show='curBot.state != "published"' ng-click='removeResponseRow(parentIndex)'></i>
                        </div>

                        
                        <div acify id="jseditor{{parentIndex}}" mode="!boc.isEditable()" validate-error="true" name="text{{parentIndex}}"  no-focus="nofocus" callback='jsEditorCallbacks' ng-model="rdata.text" encode-decode ng-if="rdata.type == 'uxmap'"></div>
                        <div ng-show="ontologyQAForm.text{{parentIndex}}.$dirty" class="col-xs-12 padding0">
                            <div error-alert ng-show='ontologyTextErr(ontologyQAForm.text{{parentIndex}}.$error.required)' class="text-danger form-error-text"> {{'res_required'| i18nString}}</div>
                            <div error-alert ng-show="ontologyTextErr(ontologyQAForm.text{{parentIndex}}.$error.codeerror)" class="text-danger form-error-text"> {{'correct_res'| i18nString}} </div>
                        </div>

                        <div id="editor{{parentIndex}}_{{$index}}" class="subMarkdownEditor" ng-repeat=" ans in rdata.addOnAns track by $index">
                            <sample-tempalets class="ontologySamples" ng-if="ans.type == 'uxmap'" selected-channel="rdata.channel" selected-callback="ans.text" demo-templates="demoTemplates" tab-index="currentTabIndexOfPage2"></sample-tempalets>
                            <div class="respnseDelete" ng-click="removeAddOnResponse(rdata.addOnAns,$index)"><i  class="btx-delete-1 trashIcon" ng-show='curBot.state != "published"'></i></div>
                            <button type="button" class="btn noMargin disableEditException" ng-class="{active: ans.type == 'basic'}" ng-click="notifyUser(ans, 'basic')">{{'standard_text'| i18nString}}</button>
                            <button type="button" class="btn noMargin disableEditException" ng-class="{active: ans.type == 'uxmap'}" ng-click="notifyUser(ans, 'uxmap')">{{'advanced_mode'| i18nString}}</button>
                            <markdown-editor no-focus="nofocus" callback="markdownCB2" mode="!boc.isEditable()" name="textAddOnQa{{parentIndex}}_{{$index}}" markdownid="markdown_editorAddOnQA{{parentIndex}}_{{$index}}" config="{popupModal : true}" ng-model="ans.text" encode-decode ng-if="ans.type == 'basic'">
                            </markdown-editor>
                            <div acify  id="jseditorAddOnQA{{parentIndex}}.{{$index}}" mode="!boc.isEditable()" validate-error="true" name="textAddOnQA{parentIndex}}.{{$index}}"  no-focus="nofocus" callback='jsEditorCallbacks' ng-model="ans.text" encode-decode ng-if="ans.type == 'uxmap'"></div>
                            <div ng-show="ontologyQAForm.textAddOnQa{{parentIndex}}_{{$index}}.$dirty" class="col-xs-12 padding030">
                                <div error-alert ng-show="ontologyQAForm.textAddOnQa{{parentIndex}}_{{$index}}.$error.required" class="text-danger form-error-text"> {{'res_required'| i18nString}}</div>
                                <div error-alert ng-show="ontologyQAForm.textAddOnQa{{parentIndex}}_{{$index}}.$error.codeerror" class="text-danger form-error-text"> {{'correct_res'| i18nString}} </div>
                            </div>
                        </div>
					</div>
                        <span class="addResponseExtended" ng-click="addOnResponse(rdata,parentIndex)" ng-class='{"disabled": curBot.state == "published"}'>
                            {{'add_extend_res'| i18nString}}
                        </span> 
				</div>                               
			</div>
                <a class='responseBtn' ng-click='addResponseRow()' ng-class='{"disabled": curBot.state == "published","disablesNodeLevelEdit":noeditLinkFaq}'>{{'add_alt_res'| i18nString}}</a>
        </div>

        <div class="responsesection col-xs-12 mt-20" ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
            <div class="kr-sg-input-text">
                <div class="referenceClass">
                    <span class="label-text"> {{'referenceId'| i18nString}}</span>
                    <span>
                        <span class="tooltip-custom">
                            <i class="helpIcon btx-help"></i>
                            <span class="tooltiptextalert j-alignment" ng-click="$event.stopPropagation()">
                                {{'referenceIdTooltip'| i18nString}}
                            </span>
                        </span>
                    </span>
                </div>
                <input type="text" placeholder=" {{'referenceIdPlaceholder'| i18nString}}" ng-model="faqDisplay.faqReferenceId" class="input-text"  ng-keyup="validateBotName(faqDisplay.faqReferenceId)" ng-class="{'error':showErrorMessage}">
                <div  ng-show="showErrorMessage">
                <div error-alert ng-show="showErrorMessage" class="text-danger form-error-text"> {{'referenceId_name_pattern'| i18nString}}</div>
                </div>
            </div>
        </div>
        <div class="responsesection col-xs-12 disableIntent mt-20" ng-class="{'disablesNodeLevelEdit':noeditLinkFaq}">
            <div class="kr-sg-input-text">
                <div class="referenceClass">
                    <span class="label-text"> {{'intent_status'| i18nString}}</span>
                    <span>
                         <span class="tooltip-custom">
                            <i class="helpIcon btx-help">
                            </i>
                            <span class="tooltiptextalert disableTooltip" ng-click="$event.stopPropagation()">
                                {{'intent_status_tooltip'| i18nString}}
                            </span>
                        </span>
                    </span>
                </div>
                <toggle-switch ng-model="enableDisable.faqStatus" class="pull-left"
                    ng-class="{'toggle-publish-mode-freeze':displayMode==='VIEW'}">
                </toggle-switch>
            </div>
        </div>
        <div id="sourceLinkFaqModal" class="modal fade" data-backdrop="static" tabindex="-1" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">                                 
                  <h4 class="modal-title">  {{'redirectSourceFaq'| i18nString}}</h4>
                </div>
                <div class="modal-body">
                  <p> {{'redirectedToFaq'| i18nString:({dyn:faqData.questionPayload.question})}}</p>
                </div>
                <div class="modal-footer">                               
                  <button class="kr-sg-button-primary btn_md" type="button" ng-click="redirectToFaq(faqData)">{{'proceed'| i18nString}}</button>
                  <button class="kr-sg-button-secondary btn_md" type="button" ng-click='closeSourceLinkModal()'>{{'cancel'| i18nString}}</button>
                </div>
              </div>
            </div>
        </div> 
        <div id="DuplicateLinkFaqModal" class="modal fade" data-backdrop="static" tabindex="-1" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">                                 
                  <h4 class="modal-title">{{'duplicateQuestion'| i18nString}}</h4>
                </div>
                <div class="modal-body">
                  <p>{{'duplicateQuestionAlreadyPresent'| i18nString:({dyn:qModel[0].question})}}</p>
                  <p>{{'connectCurrentIntentFaqs'| i18nString}}</p>
                  <div class="faqDetails">
                    <div class="faqList"> {{duplicateQuestion.questionPayload.question}}</div>
                    <div class="path">{{duplicateFaqPath}}</div>
                </div>
                <div class="">
                    <button class="kr-sg-button-primary" type="button" ng-click="selectLinkFaq($index,duplicateQuestion)">Link</button>
                </div>
                </div>
                <div class="modal-footer">                               
                  <button class="kr-sg-button-secondary btn_md" type="button" ng-click='closeDuplicateLinkModal()'>{{'cancel'| i18nString}}</button>
                </div>
              </div>
            </div>
        </div>


        <bot-modal-slider id="linkingFaqModalSlider" class="ontologyFaqsModal" >
            <div class="modalSliderContainer width900" ng-if="linkingFaqSliderOpen">
                <div class="modalHeader">
                    <!-- <i class="arrowAngle btx-carrot-left" ng-click="closeUpdateFaqModal()"></i>                   -->
                    <h4 class="modal-title">
                        {{'linkExisitingQuestion'| i18nString}} <i class="btx-close" ng-click="closeUpdateFaqModal()"></i>                        
                    </h4>
                </div>
                <div class="modalBody">
                    <div class="mainContent">
                        <div class="help_hint_data">
                            <div class="bulb-icon">
                                <i class="btx-bulb"></i>
                            </div>
                            <div class="hint-content">{{'faqAlreadyAvaiable'| i18nString}} <a href="https://developer.kore.ai/docs/bots/bot-builder-tool/knowledge-task/taxonomy-based-kg/" target="_blank" class="learnMoreLink">{{'learn_more_label'| i18nString}}</a></div>
                        </div>                                         
                        <div class="kr-sg-input-search">                               
                            <input focus-it tabindex="1" type="text" ng-keyup="$event.stopPropagation();searchFAQ($event)" ng-model="searchLinkFaq.faqLinkSearchTerm" id='searchFAQTerm' type="text" placeholder="{{'search'| i18nString}}" class="input-search">
                            <i ng-if='!searchLinkFaq.faqLinkSearchTerm' class="btx-search search-icon"></i>  
                            <i ng-click='$event.stopPropagation();searchFAQ()' ng-if='searchLinkFaq.faqLinkSearchTerm' class="btx-close search-icon"></i>  
                            <div class="pressEnter">{{'pressEnterSearch' | i18nString}}</div>                    
                        </div>
                        <div class='text-center marginB20T140 paddingBottom20' ng-if='loadingFaqs'>
                            <span><i class='fa fa-circle-o-notch fa-spin-fast marginRight10 marginTop10'></i>{{'loading'| i18nString}}</span>
                        </div>
                        <div class="link-existing-que-table-data" id="faqLinkingSlider" ng-show="linkFaqs.length">
                            <div class="table-header col-xs-12">
                                <div class="h-title col-xs-7 pl-43">{{'constants.flowtasks_intent'| i18nString}}</div>
                                <div class="h-title col-xs-5">{{'path'| i18nString}}</div>
                            </div>
                            <div class="table-scroll-linked-existings" id='faqsLinkedCollectectionBody' perfect-scroll dynamic-height dynaoffset="-325">
                                <div class="table-body-linked-existing col-xs-12" faqid="{{linkFaq._id}}" ng-class="{'faqselected':faqSelected.selected == linkFaq._id}" ng-repeat="linkFaq in linkFaqs" ng-click="selectFaqLink($index,linkFaq,this,$event)">
                                    <div class="kr-sg-radiobutton d-block m-0 col-xs-7">
                                        <input value="{{linkFaq._id}}" id="{{linkFaq._id}}" ng-model="faqSelected.selected" name="{{linkFaq._id}}" class="radio-custom" type="radio">
                                        <label for="{{linkFaq._id}}" class="radio-custom-label">{{linkFaq.questionPayload.question | shortenEllipsisString}} </label>
                                    </div> 
                                    <div class="col-xs-5 path-title">{{linkFaq.path}}</div>
                                </div>                                                             
                            </div>                            
                        </div>  
                        <div class='text-center marginB20T10 paddingBottom20' ng-if='faqPaginationFlag'>
                            <span>{{'loading_more'| i18nString}}</span><br/><i class='fa fa-circle-o-notch fa-spin-fast marginRight10'></i>
                        </div>
                        <div class="noQuestionsContent" ng-if="showSearchResults">
                            <div class="header">{{'no_results'| i18nString}}</div>
                        </div>                                    
                    </div>
                </div>
                <div class="modalFooter">
                    <button type="button" ng-click="selectLinkFaq($index,linkFaq,this,$event)" class="btn"> Link </button>
                    <button type="button" class="btn closeCancel" ng-click="closeUpdateFaqModal()">{{'cancel'| i18nString}}</button>
                </div>
            </div>
        </bot-modal-slider> 

        
    </form>
    </div>
        <div class="boqfooter col-xs-12 hide">
                <button class="btn btn-xs btn-primary saveBTN" ng-class="{'nodeLockEditException':(faqData.editLocked && !faqData.isRootTerm)}" ng-click="addOrUpdateFAQ()">{{'save'| i18nString}}</button>
                <button class="btn btn-xs cancelBTN disableEditException" ng-class="{'nodeLockEditException':(faqData.editLocked && !faqData.isRootTerm)}" ng-click='botOntoQaCancel()'>{{'cancel'| i18nString}}</button>
        </div>
        <div class="boqfooter col-xs-12">
                <button ng-disabled="saveInProgress || faqData.responseType=='' || showErrorMessage" ng-class="{'nodeLockEditException':faqData.editLocked,'disabled':showEditButton}" class="btn btnSolidBlue" ng-click="addOrUpdateFAQ()">
                        <i ng-if="saveInProgress" class="fa fa-spinner fa-spin"></i> {{(saveInProgress)? savingLabel : save }}
                    </button>
                <button ng-disabled="saveInProgress || cancelFlag" class="btn closeCancel disableEditException cancelQA" ng-class="{'nodeLockEditException':(faqData.editLocked && !faqData.isRootTerm)}" ng-click="botOntoQaCancel()">{{'cancel'| i18nString}}</button>
        </div>
    </div>
</div>
  

                <bot-modal-slider class="ontologyTagsModal" ng-show="showOntologyTagsModal" id="botOntologyModalSlider">
        <div class="modalSliderContainer width900">
            <div class="modalHeader paddingTop10">
                <h4 class="modal-title tableRow">
                    <i  class="btx-close" ng-click="closeUpdateTagModal()"></i>
                    <div class="tagHeadBar">
                        <p class="tagNameHeader">{{boqObject.clickedTag.tag}}</p>
                        <p class="tagTitleHeader">{{'tag_settings'| i18nString}}</p>
                    </div>
                </h4>
                <!-- <span aria-hidden="true"><i class="fa fa-close" ng-click="closeUpdateTagModal()" ></i></span> -->
            </div>
            <div class="modalBody" perfect-scroll dynamic-height dynaoffset="-115" height-property="height">
                           <form name="streamktform" class="wf-form p-15 pt-pb-20" novalidate>
                        <fieldset class="row">
                    
                  
                    <div class="col-xs-12 tagUsageContainer">
                                        <div class="col-xs-12 form-group noPadding">
                                            <div class="col-xs-12 noPaddingLeft noPaddingRight termUsageDiv">
                                                <label  class="termUsageLabel" tooltip-placement="right" tooltip=""> {{'tag_usage'| i18nString}} </label>
                                                <p class="termUsageDesc">{{'query_kg'| i18nString}}</p>
                                            </div>
                                      <!--       <div class="col-xs-12 noPaddingLeft noPaddingRight" >
                                                <div class="termUsageTypeDiv {{termUsageType.class}}container" ng-class="{'selected':boqObject.clickedTag.tagUsage === termUsageType.id}" ng-repeat="termUsageType in termUsageTypes"> 
                                                  <label class="radio" for="{{termUsageType.id}}">
                                                    <input type="radio" name="rGroup" ng-model="boqObject.clickedTag.tagUsage" value="{{termUsageType.id}}" id="{{termUsageType.id}}"/>
                                                    <span class="description"></span>
                                                    <span class="description">{{termUsageType.description}}</span>
                                                    </label>
                                                      <div class="sampleLayout">{{termUsageType.name}}<span ng-show="termUsageType.icon" class="{{termUsageType.class}}"><img ng-src="{{termUsageType.icon}}"/></span></div>
                                                </div>
                                                  
                                                  
                                                </div> -->
                                                <div class="btn-group col-xs-12 noPadding dropdown dropdown-select">
                                                    <button type="button" class="form-control btn-default dropdown-toggle{{$index}}" data-toggle="dropdown">
                                                        <span class="selectfield"></span> 
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu" onclick="event.stopPropagation();">
                                                         <ul class="noPadding positionRelative listMenu" role="menu">
                                                            <li class="list" ng-repeat="termUsageType in termUsageTypes">
                                                                <div class="termUsage" ng-click="selectTermUsage($event,termUsageType,boqObject.clickedTag)">
                                                                     <span class="fa fa-check"  ng-class="{'selected':termUsageType.selected}"></span>
                                                                     <div class="termUsageType">
                                                                         <label>{{termUsageType.name}}</label>
                                                                         <p class="description">{{termUsageType.description}}</p>
                                                                     </div>
                                                                      <div class="sampleLayout">{{termUsageType.name}}<span ng-show="termUsageType.icon" class="{{termUsageType.class}}"><img class="termUsageIcon" ng-src="{{termUsageType.icon}}"/></span></div>
                                                            
                                                                </div>
                                                               
                                                            </li>
                                        
                                                            
                                                   
                                                        </ul>
                                                    </div>
                                       
                                                </div>
                                              </div>
                    </div>
                    <div class="col-xs-12">
                        <div class="col-xs-12 noPaddingLeft noPaddingRight">
                            <label  tooltip-placement="right" tooltip=""> {{'Traits_label'| i18nString}} </label>
                            <span class="createnewclassbtn" ng-click="boc.openManageTraits()"><i class="fa fa-plus"></i>{{'manage_traits'| i18nString}}</span>
                        </div>
                        
                        <div class="col-xs-12 noPaddingLeft noPaddingRight"   ng-class="{'disableOption':isOrganizer}">
                                <input type="text" ng-init="bindAuioCompleteForTags()" id="addTraitforKgTags" ng-model="traitRuleForTag.traitRule" ng-change="updateTraitRule(traitRuleForTag.traitRule)" name="childTermName"  class="form-control"
                                min-length="0" max-length="200"  placeholder="{{'type_traits'| i18nString}}">
                        </div>
                       
            
                       
                    </div>
                 
                    <div class="col-xs-12  manageContext">
                            <div>
                             <label> {{'manage_context'| i18nString}} </label>
                            </div>
                            <div class="col-xs-12 noPaddingLeft noPaddingRight">
                                <div class="manageContextContainer">
                                   <div class="manageContextConditions noPadding">
                                    <p class="pre-conditionsHeader">
                                        {{'intent_preconditions_name'| i18nString}} 
                                        <i class="helpIcon btx-help" tooltip-placement="top" tooltip="{{'term_qualified'| i18nString}}"></i>
                                    </p>
                            
                                    <tags-input add-on-comma="false" class="tagOrCondition" replace-spaces-with-dashes="false" min-length="0"
                                        max-length="128" use-strings="true" placeholder="{{'type_and_enter_placeholder'| i18nString}}"
                                         ng-model="contextObj.preConditions" on-tag-added="contextObjUpdate()" on-tag-removed="contextObjUpdate()"></tags-input>
                                </div>
                                <div class="manageContextConditions marginTop20">
                                        <p class="contextOutputHeader">
                                            {{'context_output_name'| i18nString}}
                                                <i class="helpIcon btx-help" tooltip-placement="top" tooltip="{{'def_qualified_path'| i18nString}}"></i>
                                        </p>
                                        <tags-input add-on-comma="false" class="" replace-spaces-with-dashes="false" min-length="0"
                                            max-length="128" use-strings="true" placeholder="{{'type_and_enter_placeholder'| i18nString}}" 
                                             ng-model="contextObj.contextTags" on-tag-added="contextObjUpdate()" on-tag-removed="contextObjUpdate()"></tags-input>
                                </div> 
                                </div>
                            </div>
                           
                           
                            <!-- <p class="grayTextSyn">Synonyms defined here are applicable only when <strong>{{term.label}}</strong> is present in this path ({{term.labelpath}})</p> -->
                       <!--  </div> -->
                        
                    </div>
                      <div class="col-xs-12 synonyms">
                        <label>{{'synonyms_name'| i18nString}}</label>
                        <div class="synonymContainer">
                            <div class="col-xs-12 form-group noPadding">
                                <div class="col-xs-12 noPaddingLeft noPaddingRight">
                                    <label> {{'path_level'| i18nString}} </label>
                                    <span class="count" ng-show="boqObject.clickedTag.synonyms.length">{{boqObject.clickedTag.synonyms.length}} Synonyms</span>
                                    <p class="grayTextSyn">
                                        <span ng-bind-html="'synonyms_applicable'| i18nString:({dyn:boqObject.clickedTag.tag})"></span>
                                        <span>
                                            (<span ng-repeat="bcdata in termPath"><span class="arrow" ng-hide="$index == 0">></span><span>{{bcdata.nodeLabel}}</span></span>)
                                        </span>
                                    </p>
                                </div>
                                <div class="col-xs-12 noPaddingLeft noPaddingRight" ng-show="displayMode!=='view'">
                                    <tags-input add-on-comma="false" replace-spaces-with-dashes="false" min-length="0" max-length="128" placeholder="{{'type_and_enter_placeholder'| i18nString}}" use-strings="true"  ng-model="boqObject.clickedTag.synonyms"></tags-input>
                                </div>
                            </div>
                        <div class="col-xs-12 noPadding">
                                <div class="col-xs-12 noPaddingLeft noPaddingRight">
                                    <label > {{'kg_synonyms'| i18nString}} </label>
                                    <span class="count" ng-show="tagSynonyms.synonyms">{{tagSynonyms.synonyms.length}} {{'synonyms_name'| i18nString}}</span>
                                    <p class="grayTextSyn">
                                        <span ng-bind-html="'synonyms_defined'| i18nString:({dyn:boqObject.clickedTag.tag})"></span>
                                        <span>
                                            <a ng-if="tagResponseSynonyms.count" ng-click="boc.editGlobalSynonyms(boqObject.clickedTag.tag,tagSynonyms)"> {{'edit'| i18nString}}</a>
                                        </span>
                                    </p>
                                </div>
                                <div class="col-xs-12 form-group noPadding" ng-if="!tagResponseSynonyms.count">
                                    {{'no_match_graph'| i18nString:({dyn:boqObject.clickedTag.tag})}} <a ng-click="boc.addnewGlobalSynonym(boqObject.clickedTag.tag)"> {{'add_new'| i18nString}}</a>
                                </div>
                                <div class="col-xs-12 form-group noPadding noTagEdit" ng-if="tagResponseSynonyms.count">
                                    <tags-input add-on-comma="false" replace-spaces-with-dashes="false" min-length="0" max-length="128" placeholder="{{'type_and_enter_placeholder'| i18nString}}" use-strings="true"  id="globalSynonyms" ng-model="tagSynonyms.synonyms"></tags-input>
                                </div>
                        </div>
                        <div class="col-xs-12 noPaddingLeft noTagEdit" ng-show="stream.confidenceConfigs[1].useBotSynonyms">
                             <div class="col-xs-12  form-group noPaddingLeft noPaddingRight marginbottom5">
                                <label  tooltip-placement="right" tooltip=""> {{'ddval_synonyms'| i18nString}} 
                                    <i class="helpIcon btx-help" tooltip-placement="right" tooltip="{{'synonyms_concepts'| i18nString}}"></i>
                                </label>
                                <span class="count" ng-show="botSynonyms.synonyms.length">{{botSynonyms.synonyms.length}} {{'synonyms_name'| i18nString}}</span>
                                <p class="grayTextSyn" ng-bind-html="'bot_synonyms_match'| i18nString:({dyn:boqObject.clickedTag.tag})" ng-show="botSynonyms.synonyms.length">
                                </p>
                                <p class="grayTextSyn" ng-show="!botSynonyms.synonyms.length">{{'no_match_found'| i18nString}}</p>
                                <tags-input ng-show="botSynonyms.synonyms.length" add-on-comma="false" replace-spaces-with-dashes="false" min-length="0" max-length="128" placeholder="" use-strings="true"  ng-model="botSynonyms.synonyms"></tags-input>

                            </div>
                        </div>
                    </div>
                    
                </div>
              
                       </fieldset>
                     </form>
            </div>
            <div class="modalFooter">
                <button type="submit" class="btn" ng-click="addClassAndSynonyms();ontologyQAForm.$setDirty();">{{'done'| i18nString}}</button>
                <button type="reset" ng-click="fieldData = {};closeUpdateTagModal();" class="btn closeCancel"> {{'cancel'| i18nString}} </button>
            </div>

        </div>
    </bot-modal-slider> 